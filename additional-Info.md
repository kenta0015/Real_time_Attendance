# 1.EXPO_PUBLIC_ENABLE_DEV_SWITCH ã¯ true ã§å†…éƒ¨ãƒ†ã‚¹ãƒˆä¸­ã¯ OKã€‚æœ¬ç•ªãƒªãƒªãƒ¼ã‚¹å‰ã« false ã«æˆ»ã™ã®ã‚’å¿˜ã‚Œãªã„ã§ã€‚

# 2.ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã®ã‚¢ãƒ—ãƒªã®èµ·å‹•ã«ã¯ monkey ã¯ä½¿ã‚ãªã„ã€‚èµ·å‹•ã¯**am start -W**ã«çµ±ä¸€ã€€ã€€ãã‚‹ãã‚‹ãŒç™ºç”Ÿã™ã‚‹

### ADB launch & log (no monkey)

$adb = "$env:LOCALAPPDATA\Android\Sdk\platform-tools\adb.exe"
$serial = "192.168.1.208:34111"
$pkg = "com.kenta0015.geoattendance.internal"
$act = "$pkg/$pkg.MainActivity"
$out = ".\rta_after_launch.txt"

& "$adb" connect $serial | Out-Null
& "$adb" -s $serial shell am force-stop $pkg
& "$adb" -s $serial shell am start -W -n $act -a android.intent.action.MAIN -c android.intent.category.LAUNCHER
Start-Sleep -Seconds 45
& "$adb" -s $serial logcat -d -v time ReactNative:V ReactNativeJS:V Expo:V OkHttp:V AndroidRuntime:E ActivityManager:I WindowManager:W \*:S > $out
Get-Content $out -Tail 120

è£œè¶³ï¼ˆé‹ç”¨ãƒ«ãƒ¼ãƒ«ãƒ»è¶…çŸ­ï¼‰

pm clear ã¯å¿…è¦æ™‚ã®ã¿ï¼ˆåˆå› OTA å–å¾—ã§å¾…ã¤ â†’â€œãã‚‹ãã‚‹â€ã«è¦‹ãˆã‚‹ãŸã‚ï¼‰ã€‚

è² è·è©¦é¨“ã‚„ãƒ©ãƒ³ãƒ€ãƒ æ“ä½œä»¥å¤–ã§**monkey ã¯ä½¿ã‚ãªã„**ã€‚

å†ç¾ãƒ†ã‚¹ãƒˆã¯ã€Œæ‰‹ã‚¿ãƒƒãƒ—ã€ã¨åŒç­‰ã®ä¸Šè¨˜ã‚³ãƒãƒ³ãƒ‰ã«å›ºå®šã€‚

# 3.WEB ã§ã‚¢ãƒ—ãƒªã®é–‹ãæ–¹

### 1) Web ç”¨ã«æ›¸ãå‡ºã—

npx expo export --platform web
cd C:\Users\User\Downloads\RTA
npx serve -s dist -l 5173

### 2) ãƒ­ãƒ¼ã‚«ãƒ«ã§é…ä¿¡ï¼ˆã©ã‚Œã‹å…¥ã£ã¦ã‚‹æ–¹ï¼‰

npx http-server dist -p 5173

### ã‚‚ã—ãã¯

npx serve dist -l 5173

# 4.USB ã®æ¥ç¶š

ç«¯æœ«ã§ USB æ¥ç¶šå¾Œï¼ˆUSB debbugging ï¼‰

$pt = "C:\Users\User\AppData\Local\Android\Sdk\platform-tools"
$env:Path = "$pt;$env:Path"
adb version
adb devices

### ãã“ã‹ã‚‰ dec client ã§æ¥ç¶šã™ã‚‹å ´åˆ

adb -d reverse --remove-all
adb -d reverse tcp:8081 tcp:8081

adb -d shell am force-stop com.kenta0015.geoattendance.internal
adb -d shell am start -W -n com.kenta0015.geoattendance.internal/.MainActivity
adb -d shell am start -W -a android.intent.action.VIEW -d "rta://expo-development-client/?url=http%3A%2F%2F127.0.0.1%3A8081"

ãã®å¾Œåˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä¸‹è¨˜ã‚’è¡Œã„ã€ã‚¢ãƒ—ãƒªèµ·å‹•ã•ã›ã‚‹ï¼ˆã“ã‚Œã‚’ã‚„ã‚‰ãªã„ã¨é»’ã„ç”»é¢ã«ãªã‚‹ã ã‘ï¼‰
npx expo start --dev-client --clear

ãã‚Œã§ã‚‚ã‚¢ãƒ—ãƒªãŒèµ·å‹•ã—ãªã•ãã†ãªã‚‰ç«¯æœ«ã§ã‚¹ãƒ¯ã‚¤ãƒ—ã—ã¦çµ‚äº†ã—ã€ã‚¢ãƒ—ãƒªã‚’ã‚‚ã†ä¸€åº¦é–‹ããªãŠã™

â€»ã‚¢ãƒ³ãƒ‰ãƒ­ã‚¤ãƒ‰ã®ç”»é¢ãŒã‚¹ãƒªãƒ¼ãƒ—ãƒ¢ãƒ¼ãƒ‰ã«ãªã‚‹ã¨æ¥ç¶šãŒåˆ‡ã‚Œã‚‹ã€‚ãã®å ´åˆã¯ã‚¢ãƒ—ãƒªã‚’ã‚¹ãƒ¯ã‚¤ãƒ—ã§é–‰ã˜ã¦ã€ã¾ãŸé–‹ããªãŠã™ã€‚ã‚‚ã—ãã¯ adb reverse tcp:8081 tcp:8081 ã‚’æ‰“ã£ã¦ã‚¢ãƒ—ãƒªã‚’ã‚¹ãƒ¯ã‚¤ãƒ—ã§é–‰ã˜ã¦ã€ã¾ãŸé–‹ããªãŠã™ã‚‚ã—ãã¯ãƒªãƒ­ãƒ¼ãƒ‰

# 5.Logcat

å¼·åŒ–ç‰ˆ logcatAï¼ˆæœ€å°ã‚»ãƒƒãƒˆï¼šã‚ãªãŸã®æ—¢å®šï¼‰
& "$adb" -s $serial logcat -c

# â† ã“ã“ã§ 5 åˆ†ã»ã©æ™®é€šã«æ“ä½œï¼ˆèµ·å‹• â†’ ã‚¿ãƒ–é·ç§» â†’QR ç”»é¢ â†’ æˆ»ã‚‹ ç­‰ï¼‰

& "$adb" -s $serial logcat -d -v time AndroidRuntime:E ReactNative:V ReactNativeJS:V \*:S `
| Tee-Object .\rta_crash_scan.txt

Select-String -Path .\rta_crash_scan.txt -Pattern 'FATAL EXCEPTION|AndroidRuntime|SoLoader|SIGSEGV|ANR' `
| Select-Object -First 50

å¼·åŒ–ç‰ˆ logcatBï¼ˆãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³å‘¨ã‚Šã‚’æ¿ƒãï¼‰
& "$adb" -s $serial logcat -c

# â† ç«¯æœ«ã§ã€ŒCheck Inã€ã‚’ 1 å›ã‚¿ãƒƒãƒ—ï¼ˆ10 ç§’ä»¥å†…ï¼‰

Start-Sleep -Seconds 10
& "$adb" -s $serial logcat -d -v time ReactNativeJS:V ReactNative:V AndroidRuntime:E "\*:S" `
| Tee-Object .\rta_checkin_full.txt | Out-Null

Select-String -Path .\rta_checkin_full.txt -Pattern `  'qr_checkin_with_pin|Checked in|ARRIVED|TOKEN_INVALID|signature|expired|RAW_SCAN|token='`
| Select-Object -First 120

å¼·åŒ–ç‰ˆ logcatCï¼ˆevents ãƒãƒƒãƒ•ã‚¡ã‚‚ä¿å­˜ï¼‰
& "$adb" -s $serial logcat -c

# â† ç«¯æœ«ã§å†ç¾æ“ä½œï¼ˆã€œ10 ç§’ï¼‰

Start-Sleep -Seconds 10
& "$adb" -s $serial logcat -d -v time AndroidRuntime:E ReactNative:V ReactNativeJS:V "\*:S" `
| Tee-Object .\rta_full.txt | Out-Null

& "$adb" -s $serial logcat -b events -d -v time "\*:S" `  | Select-String 'am_anr|am_crash|am_fully_drawn'`
| Tee-Object .\rta_events.txt | Out-Null

Select-String -Path .\rta_full.txt -Pattern 'FATAL EXCEPTION|AndroidRuntime|SoLoader|SIGSEGV|ANR|qr_checkin_with_pin|token=' `
| Select-Object -First 120

# 6.ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã® Deep Link

# adb ã®ãƒ•ãƒ«ãƒ‘ã‚¹ï¼ˆAndroid Studio æ¨™æº–ï¼‰

$adb = "$env:LOCALAPPDATA\Android\Sdk\platform-tools\adb.exe"

# ç«¯æœ«ç¢ºèªï¼ˆå‡ºã¦ãã‚‹ã¯ãš: "device"ï¼‰

& $adb devices

# ç‰©ç†ç«¯æœ«ãªã‚‰ -dã€ã‚¨ãƒŸãƒ¥ãªã‚‰ -e

& $adb -d shell am start -a android.intent.action.VIEW -d "rta://join"

# devclient ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã‹ã£ãŸä»¶

ä½•ãŒåŸå› ã ã£ãŸï¼Ÿ

ã»ã¼ç¢ºå®Ÿã«ï¼ˆç¢ºä¿¡åº¦ 95%ï¼‰

Metro ã«åˆ°é”ã§ãã¦ã„ãªã‹ã£ãŸã®ãŒæœ¬è³ªã€‚
å…·ä½“çš„ã«ã¯

adb reverse ãŒæœªè¨­å®šï¼åˆ¥ç«¯æœ«ã«åˆºã•ã£ã¦ã„ãŸã€

PowerShell ã§ $adb ãŒæœªå®šç¾©ã®ã¾ã¾ & $adb ... ã‚’æ‰“ã£ã¦å¤±æ•—ã€

ãã®ã¾ã¾ rta://... ã‚’é–‹ã„ã¦ã‚‚ ç«¯æœ« â†’PC ã® 8081 ã«æ©‹ãŒç„¡ãã¦ JS ãƒãƒ³ãƒ‰ãƒ«ãŒå–ã‚Œãšã€Unable to load script â†’ æ•°ç§’å¾Œã«é»’ç”»é¢ã€ã¨ã„ã†æµã‚Œã€‚
ï¼ˆé€”ä¸­ã§ monkey ã‚’ä½¿ã†ã¨åˆ¥ Activity çµŒç”±ã«ãªã£ã¦çŠ¶æ…‹ãŒã‚„ã‚„ã“ã—ããªã‚‹ã®ã‚‚æ‚ªåŒ–è¦å› ã€‚ï¼‰

# æ¬¡å›â€œç¢ºå®Ÿã«â€ã¤ãªãŒã‚‹ 2 ã‚¹ãƒ†ãƒƒãƒ—

ï¼ˆPowerShellãƒ»USB æ¥ç¶šå‰æã€‚ã‚³ãƒãƒ³ãƒ‰ã¯ãã®ã¾ã¾è²¼ã£ã¦ OKï¼‰

## 1. Metro ã‚’èµ·å‹•ã—ã¦ ADB é€†ãƒãƒ¼ãƒˆã‚’å¼µã‚‹

# Metroï¼ˆå¿…è¦ãªã‚‰ --port å¤‰æ›´å¯ï¼‰

npx expo start --dev-client --clear

# ADB å®Ÿä½“ã¨ç«¯æœ«ã‚·ãƒªã‚¢ãƒ«ã‚’ç¢ºå®š

$adb = Join-Path $env:USERPROFILE 'AppData\Local\Android\Sdk\platform-tools\adb.exe'
if (!(Test-Path $adb)) { $adb = (& where.exe adb 2>$null | Select-Object -First 1) }
$serial = (& "$adb" devices | Select-String 'device$' | Select-Object -First 1).ToString().Split("`t")[0]

# é€†ãƒãƒ¼ãƒˆã‚’ã‚¯ãƒªãƒ¼ãƒ³ï¼†å¼µã‚Šç›´ã—ï¼ˆMetro ãŒ 8081 ãªã‚‰ãã®ã¾ã¾ï¼‰

& "$adb" -s $serial reverse --remove-all
& "$adb" -s $serial reverse tcp:8081 tcp:8081

# Metro ç¨¼åƒç¢ºèªï¼ˆPC å´ã§ OK ãŒå‡ºã‚Œã°è‰¯ã„ï¼‰

Start-Process "http://localhost:8081/status"

## 2. Dev ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’å‰é¢ â†’ ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯ã§æ¥ç¶š

# ã‚¢ãƒ—ãƒªï¼ˆDev Clientï¼‰ã‚’å‰é¢èµ·å‹•

& "$adb" -s $serial shell am start -W -n com.kenta0015.geoattendance.internal/.MainActivity

# 127.0.0.1 ã‚’ä½¿ã£ã¦ Metro ã¸ï¼ˆâ€»reverse å‰æï¼‰

& "$adb" -s $serial shell am start -W -a android.intent.action.VIEW `
-d "rta://expo-development-client/?url=http%3A%2F%2F127.0.0.1%3A8081"

## ã‚¢ãƒ—ãƒªãƒªãƒªãƒ¼ã‚¹ã¨ï¼‘ï¼’äººãƒ†ã‚¹ãƒˆ

ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åï¼šcom.kenta0015.geoattendance.internal

å†…éƒ¨ãƒ†ã‚¹ãƒˆãƒˆãƒ©ãƒƒã‚¯ï¼šversionCode 3 (1.0.0) ã¾ã§ã‚¢ãƒƒãƒ—æ¸ˆã¿

ã‚¢ãƒ—ãƒªè‡ªä½“ã¯ Google Play çµŒç”±ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»å‹•ä½œç¢ºèªæ¸ˆã¿

ã“ã“ã« ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆ + 12 Testers ã‚’é‡ã­ã¦ã€æœ¬ç•ªãƒªãƒªãƒ¼ã‚¹ã«é€²ã‚€ãƒ—ãƒ©ãƒ³ã§ã™ã€‚
ï¼ˆGoogle ã®è¦ä»¶ï¼šã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆã§ 12 äººä»¥ä¸ŠãŒ 14 æ—¥é–“å‚åŠ ã—ã¦ã„ã‚‹ã“ã¨
BuddyBoss
ï¼‰

### ãƒ•ã‚§ãƒ¼ã‚º 1ï¼šã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆãƒˆãƒ©ãƒƒã‚¯ã‚’ä½œã‚‹

ç›®æ¨™ï¼š ã€Œã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆã€ã§ versionCode 3 ã®ãƒªãƒªãƒ¼ã‚¹ã‚’ä½œæˆã—ã¦ãŠãã€‚

Play Console ã§ã‚¢ãƒ—ãƒªã‚’é–‹ã

å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ ã€Œãƒ†ã‚¹ãƒˆã¨ãƒªãƒªãƒ¼ã‚¹ > ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆã€ ã«é€²ã‚€ã€‚

ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒˆãƒ©ãƒƒã‚¯ã‚’ä½œæˆ

ã¾ã ãƒˆãƒ©ãƒƒã‚¯ãŒç„¡ã‘ã‚Œã°ã€Œãƒˆãƒ©ãƒƒã‚¯ã‚’ä½œæˆã€â†’ åå‰ã¯ closed-12testers ãªã©ã§ OKã€‚

ã™ã§ã«ã‚ã‚Œã°ã€Œãƒˆãƒ©ãƒƒã‚¯ã‚’ç®¡ç†ã€ã‹ã‚‰å…¥ã‚‹ã€‚

æ–°ã—ã„ãƒªãƒªãƒ¼ã‚¹ã‚’ä½œæˆ

ã€Œæ–°ã—ã„ãƒªãƒªãƒ¼ã‚¹ã‚’ä½œæˆã€â†’ App Bundle ã®ã¨ã“ã‚ã§
ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‹ã‚‰ versionCode 3 (1.0.0) ã‚’é¸æŠï¼ˆã¾ãŸã¯åŒã˜ AAB ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼‰ã€‚

ãƒªãƒªãƒ¼ã‚¹åï¼š3 (1.0.0) ã®ã¾ã¾ã§ OKã€‚

ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆï¼šInitial closed test build for GeoAttendance 1.0.0. ãªã©ç°¡å˜ã§ OKã€‚

ä¿å­˜ â†’ å¯©æŸ»ã¸

ç”»é¢ä¸‹éƒ¨ã§ã€Œæ¬¡ã¸ã€â†’ ã€Œä¿å­˜ã—ã¦å…¬é–‹ã€ ã¾ã§é€²ã‚ã‚‹ã€‚

ã“ã‚Œã§ ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆç‰ˆ 3 (1.0.0) ãŒå¯©æŸ»å¾…ã¡ã«ãªã‚‹ã€‚

â€» ã“ã®ãƒ•ã‚§ãƒ¼ã‚ºã§ã¯ã€å†…éƒ¨ãƒ†ã‚¹ãƒˆãƒˆãƒ©ãƒƒã‚¯ã¯ãã®ã¾ã¾æ®‹ã—ã¦ãŠã„ã¦å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚

## ãƒ•ã‚§ãƒ¼ã‚º 2ï¼š12 Testers ã«ä¾é ¼ã™ã‚‹æº–å‚™

12 Testers ã¯ã€Œ12 äººã®å®Ÿæ©Ÿãƒ†ã‚¹ã‚¿ãƒ¼ãŒ 14 æ—¥é–“ãƒ†ã‚¹ãƒˆã™ã‚‹ã€ã‚µãƒ¼ãƒ“ã‚¹ã€‚
Google Play

Starter Plan ã‚’ä½¿ã†å‰æã§å‹•ãã¾ã™ã€‚

ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒªãƒªãƒ¼ã‚¹ãŒ â€œåˆ©ç”¨å¯èƒ½â€ ã«ãªã£ãŸã‚‰

ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆç”»é¢ã®ã€Œãƒ†ã‚¹ã‚¿ãƒ¼ã€ã‚¿ãƒ–ã‹ã‚‰ï¼š

ãƒ†ã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆæ–¹å¼ ãªã‚‰ï¼šãƒ¡ãƒ¼ãƒ«ãƒªã‚¹ãƒˆã‚’ä½œæˆï¼ˆ12testers ãªã©ï¼‰ã€‚

ãƒªãƒ³ã‚¯æ–¹å¼ ãªã‚‰ï¼šGoogle ãŒæ‰¿èªå¾Œã« ã‚ªãƒ—ãƒˆã‚¤ãƒ³ URLï¼ˆãƒ†ã‚¹ãƒˆå‚åŠ ãƒªãƒ³ã‚¯ï¼‰ ãŒå‡ºã¾ã™ã€‚
BuddyBoss

12 Testers å´ã§å¿…è¦ãªæƒ…å ±ã‚’ç¢ºèª

å…¬å¼ã‚µã‚¤ãƒˆã®ãƒ•ã‚©ãƒ¼ãƒ  / ã‚ªãƒ¼ãƒ€ãƒ¼ãƒšãƒ¼ã‚¸ã§é€šå¸¸å¿…è¦ã«ãªã‚‹æƒ…å ±ï¼š

ã‚¢ãƒ—ãƒªåãƒ»ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åï¼šcom.kenta0015.geoattendance.internal

å¯¾è±¡ãƒ—ãƒ©ãƒ³ï¼šStarter Plan (1 app)

å¯¾è±¡ã‚¹ãƒˆã‚¢ï¼šGoogle Play / Closed testing

ãƒ†ã‚¹ãƒˆç”¨ã® Play ã‚¹ãƒˆã‚¢ãƒªãƒ³ã‚¯ï¼ˆã‚ªãƒ—ãƒˆã‚¤ãƒ³ URLï¼‰
ã‚‚ã—ãã¯ã€ãƒ†ã‚¹ã‚¿ãƒ¼ç”¨ Gmail ã‚¢ãƒ‰ãƒ¬ã‚¹ä¸€è¦§ã‚’å—ã‘å–ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚‚ã‚ã‚Šã¾ã™ã€‚

ã©ã¡ã‚‰ã®æ–¹å¼ã§è¡Œãã‹ã®æ–¹é‡

ãƒªãƒ³ã‚¯æ–¹å¼ OK ã®å ´åˆï¼ˆãŸã¶ã‚“ã“ã‚ŒãŒæ™®é€šï¼‰ï¼š

ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆã®ã‚ªãƒ—ãƒˆã‚¤ãƒ³ URL ã‚’ 12 Testers ã«æ¸¡ã™ã€‚

ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹æ–¹å¼ã®å ´åˆï¼š

12 Testers ã‹ã‚‰ 12 å€‹ã® Gmail ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å—ã‘å–ã‚‹ã€‚

Play Console ã®ã€Œãƒ¡ãƒ¼ãƒ«ãƒªã‚¹ãƒˆã€ã«ãã‚Œã‚‰ 12 ä»¶ã‚’ç™»éŒ²ã€‚

ã€Œä¿å­˜ã€ã—ã¦ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã€‚

## ãƒ•ã‚§ãƒ¼ã‚º 3ï¼š14 æ—¥é–“ãƒ†ã‚¹ãƒˆæœŸé–“ã®é‹ç”¨

ç›®æ¨™ï¼š ã€Œ12 äººä»¥ä¸Šã®ãƒ†ã‚¹ã‚¿ãƒ¼ãŒ 14 æ—¥é–“ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆã«å‚åŠ ã€ã¨ã„ã†æ¡ä»¶ã‚’æº€ãŸã™ã€‚
BuddyBoss

åŸå‰‡ã¨ã—ã¦ã“ã®æœŸé–“ã¯ â€œå¤§ããªã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã¯ã—ãªã„â€

æ–°ã—ã„ AAB ã‚’ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒˆãƒ©ãƒƒã‚¯ã«å‡ºã™ã¨ã€
ã€Œã©ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ 14 æ—¥é–“ãƒ†ã‚¹ãƒˆã—ãŸã‹ã€ãŒåˆ†ã‹ã‚Šã«ãããªã‚Šã¾ã™ã€‚

é‡å¤§ãƒã‚°ã§ãªã„é™ã‚Šã€versionCode 3 (1.0.0) ã‚’ 14 æ—¥é–“å›ºå®šã§ä½¿ã†ã‚¤ãƒ¡ãƒ¼ã‚¸ã«ã—ã¦ãŠãã€‚

å†…éƒ¨ãƒ†ã‚¹ãƒˆãƒˆãƒ©ãƒƒã‚¯ã§ã®é–‹ç™ºã¯ç¶™ç¶šã—ã¦ OK

æ¬¡ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆãŸã¨ãˆã° 1.0.1 / versionCode 4ï¼‰ã®ãƒ†ã‚¹ãƒˆã¯ã€
ã“ã‚Œã¾ã§ã©ãŠã‚Š å†…éƒ¨ãƒ†ã‚¹ãƒˆãƒˆãƒ©ãƒƒã‚¯ ã§è¡Œãˆã°ã€ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆã«ã¯å½±éŸ¿ã—ã¾ã›ã‚“ã€‚

ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãƒ»ANR ã®ãƒã‚§ãƒƒã‚¯

Play Console â†’ ã€Œãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚° > ã‚¢ãƒ—ãƒªã®å“è³ªã€ ãªã©ã§ã‚¯ãƒ©ãƒƒã‚·ãƒ¥çŠ¶æ³ã‚’ç¢ºèªã€‚

ã‚‚ã—è‡´å‘½çš„ãªã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãŒé€£ç™ºã—ã¦ã„ãŸã‚‰ã€ãã®æ™‚ç‚¹ã§ç›¸è«‡ã—ã¦ã€
ã€Œãƒªãƒªãƒ¼ã‚¹ã‚’ä½œã‚Šç›´ã™ã‹ï¼ã“ã®ã¾ã¾ 14 æ—¥å®Œèµ°ã™ã‚‹ã‹ã€ã‚’æ±ºã‚ã‚‹ã€‚

12 Testers å´ã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

ãƒ†ã‚¹ãƒˆé€²æ—ï¼ˆä½•äººã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã‹ã€ä½•æ—¥çµŒéã—ãŸã‹ï¼‰ãŒè¦‹ã‚‰ã‚Œã‚‹ã¯ãšãªã®ã§
ã€Œäºˆå®šé€šã‚Š 12 äººã«é”ã—ã¦ã„ã‚‹ã‹ã€ã‚’ç¢ºèªã—ã¦ãŠãã€‚

## ãƒ•ã‚§ãƒ¼ã‚º 4ï¼šã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆå®Œäº† â†’ è£½å“ç‰ˆã‚¢ã‚¯ã‚»ã‚¹ç”³è«‹

14 æ—¥ï¼‹ Î± çµŒéã—ã€12 äººæ¡ä»¶ã‚‚æº€ãŸã—ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§é€²ã‚ã‚‹å†…å®¹ã§ã™ã€‚

Play Console ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ç¢ºèª

ã€Œè£½å“ç‰ˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’ç”³è«‹ã€ã¨ã„ã£ãŸã‚«ãƒ¼ãƒ‰ãŒå‡ºã¦ãã‚‹ã¯ãšã§ã™ã€‚
BuddyBoss

ç”³è«‹ãƒ•ã‚©ãƒ¼ãƒ ã®å›ç­”

è³ªå•å†…å®¹ã®ä¾‹ï¼š

ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆã®å†…å®¹ï¼ˆæœŸé–“ãƒ»äººæ•°ãƒ»ä¸»ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼‰

ã‚¢ãƒ—ãƒªã®ç”¨é€”ãƒ»å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼

ãƒªãƒªãƒ¼ã‚¹å‰ã«è¡Œã£ãŸãƒ†ã‚¹ãƒˆã‚„å“è³ªç¢ºä¿ã®æ–¹æ³• ãªã©

ã“ã“ã¯è‹±èªã§ã®èª¬æ˜ãŒå¿…è¦ã«ãªã‚‹ã®ã§ã€
å®Ÿéš›ã«ãƒ•ã‚©ãƒ¼ãƒ ãŒå‡ºãŸã‚‰ã‚¹ã‚¯ã‚·ãƒ§ or è³ªå•æ–‡ã‚’é€ã£ã¦ãã‚Œã‚Œã°ã€ä¸€å•ãšã¤è‹±æ–‡ã‚’ä¸€ç·’ã«ä½œã‚‹ã€‚

ç”³è«‹å¾Œã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç†

é€šå¸¸ã¯ 1 é€±é–“ä»¥å†…ã«çµæœãŒãƒ¡ãƒ¼ãƒ«ã§å±Šãã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚
BuddyBoss

## ãƒ•ã‚§ãƒ¼ã‚º 5ï¼šæœ¬ç•ªï¼ˆProductionï¼‰ãƒªãƒªãƒ¼ã‚¹

è£½å“ç‰ˆã‚¢ã‚¯ã‚»ã‚¹ãŒæ‰¿èªã•ã‚ŒãŸã‚ã¨ã«ã‚„ã‚‹ã“ã¨ã§ã™ã€‚

æœ€çµ‚ãƒ“ãƒ«ãƒ‰ã‚’æ±ºã‚ã‚‹

ã€Œã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆã¨åŒã˜ versionCode 3 ã‚’ãã®ã¾ã¾æœ¬ç•ªã¸å‡ºã™ã€

é‡å¤§ãªå•é¡ŒãŒãªã‘ã‚Œã°ã“ã‚ŒãŒä¸€ç•ªå®‰å…¨ã€‚

ã‚‚ã—å†…éƒ¨ãƒ†ã‚¹ãƒˆã§ 1.0.1 ãªã©ã‚’ä½œã£ã¦ã„ãŸå ´åˆï¼š

ãã®ç‰ˆã‚’ eas build --profile production ã§ãƒ“ãƒ«ãƒ‰ã—ã¦ã€
versionCode 4 ãªã©ã¨ã—ã¦æœ¬ç•ªãƒˆãƒ©ãƒƒã‚¯ã«å‡ºã™ã€‚

Production ãƒˆãƒ©ãƒƒã‚¯ã«ãƒªãƒªãƒ¼ã‚¹ä½œæˆ

å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ ã€Œãƒ†ã‚¹ãƒˆã¨ãƒªãƒªãƒ¼ã‚¹ > è£½å“ç‰ˆã€

ã€Œæ–°ã—ã„ãƒªãƒªãƒ¼ã‚¹ã‚’ä½œæˆã€ â†’ App Bundle ã‚’é¸æŠ â†’ ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’è¨˜å…¥

ã€Œä¿å­˜ã—ã¦å…¬é–‹ã€ã§æœ¬ç•ªãƒªãƒªãƒ¼ã‚¹ã‚’é–‹å§‹ã€‚

ä»Šå¾Œã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæ–¹é‡ï¼ˆã–ã£ãã‚Šï¼‰

æ–°æ©Ÿèƒ½ã‚„å¤§ãã„å¤‰æ›´ï¼š

ã¾ãš å†…éƒ¨ãƒ†ã‚¹ãƒˆãƒˆãƒ©ãƒƒã‚¯ ã§æ¤œè¨¼ã€‚

å®‰å®šã—ã¦ããŸã‚‰ ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆãƒˆãƒ©ãƒƒã‚¯ ã§çŸ­æœŸãƒ†ã‚¹ãƒˆã€‚

å•é¡Œãªã‘ã‚Œã° æœ¬ç•ªãƒˆãƒ©ãƒƒã‚¯ ã«åæ˜ ã€‚

ç·Šæ€¥ãƒã‚°ä¿®æ­£ï¼š

å¿…è¦ãªã‚‰ç›´æ¥ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ï¼æœ¬ç•ªãƒˆãƒ©ãƒƒã‚¯ã«å°ã•ã„ä¿®æ­£ã ã‘å‡ºã™ã€‚

# â‘  ã©ã®ç”»é¢ãŒ Session / Guest ã‚’å‚ç…§ã—ã¦ã„ã‚‹ã‹

| ç”»é¢ / ãƒ«ãƒ¼ãƒˆ                             | å½¹å‰²                                       | å‚ç…§ ID                                             | æ ¹æ‹ ï¼ˆä¸»ãªãƒ•ã‚¡ã‚¤ãƒ«ï¼‰                                                                                                |
| ----------------------------------------- | ------------------------------------------ | --------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------- |
| **/(tabs)/events**ï¼ˆã‚¿ãƒ–ã€ŒHistoryã€ï¼‰     | å±¥æ­´ä¸€è¦§ï¼ˆä½œæˆ/å‚åŠ ã®é›†ç´„ï¼‰                | **Guest**ï¼ˆç«¯æœ«ãƒ­ãƒ¼ã‚«ãƒ«ã®æ“¬ä¼¼ UIDï¼‰                 | `app/(tabs)/events.tsx` â†’ `screens/EventsList.tsx`ï¼ˆ`getGuestId()`, `getGuestIdShort()`ï¼‰                           |
| **/(tabs)/organize**ï¼ˆã‚¿ãƒ–ã€ŒOrganizeã€ï¼‰  | ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆï¼†æœ€è¿‘ã®ã‚¤ãƒ™ãƒ³ãƒˆè¡¨ç¤º           | **Guest**ï¼ˆä½œæˆè€… `created_by` ã«ä½¿ç”¨ï¼‰             | `app/(tabs)/organize/index.tsx`ï¼ˆ`createdBy = await getGuestId()` â†’ `createEvent({ p_created_by: createdBy, â€¦ })`ï¼‰ |
| **/(tabs)/organize/events/[id]**          | ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ï¼ˆå‚åŠ è€…å´ã®ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³å«ã‚€ï¼‰ | **Guest**ï¼ˆå‡ºå¸­ `attendance` æŒ¿å…¥æ™‚ã® `user_id`ï¼‰   | `app/(tabs)/organize/events/[id].tsx`ï¼ˆ`user_id: await getGuestId()`ï¼‰                                              |
| **/(tabs)/organize/events/[id]/checkin**  | ä¸»å‚¬è€…ã®ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ãƒªã‚¹ãƒˆ                 | **ID ä¸è¦**ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ ID ã¯ä½¿ã‚ãšã€eventId ã§é›†è¨ˆï¼‰ | `app/(tabs)/organize/events/[id]/checkin.tsx`ï¼ˆeventId ãƒ™ãƒ¼ã‚¹ã®ä¸€è¦§ãƒ»é›†è¨ˆï¼‰                                         |
| **/(tabs)/organize/events/[id]/invite**   | æ‹›å¾…ç”¨æƒ…å ±                                 | **ID ä¸è¦**ï¼ˆeventId ã®ã¿ï¼‰                         | `app/(tabs)/organize/events/[id]/invite.tsx`                                                                        |
| **/(tabs)/organize/events/[id]/settings** | ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š                               | **ID ä¸è¦**ï¼ˆeventId ã®ã¿ï¼‰                         | `app/(tabs)/organize/events/[id]/settings.tsx`                                                                      |
| **/(tabs)/organize/admin/[eventId]/live** | Live ç®¡ç†ï¼ˆãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼‰                  | **ID ä¸è¦**ï¼ˆeventId ã®ã¿ï¼‰                         | `app/(tabs)/organize/admin/[eventId]/live.tsx`ï¼ˆ`/organize/events/${eventId}/live` ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼‰                 |
| **/(tabs)/profile**                       | ç¾åœ¨ãƒ­ãƒ¼ãƒ«ï¼Guest ID è¡¨ç¤º                  | **Guest**ï¼ˆè¡¨ç¤ºï¼†ãƒˆã‚°ãƒ«ï¼‰                           | `app/(tabs)/profile/index.tsx`ï¼ˆ`useRoleStore`, `getGuestId` ã®è¡¨ç¤ºï¼‰                                               |
| **/(tabs)/debug**                         | ã‚»ãƒƒã‚·ãƒ§ãƒ³/ç’°å¢ƒã®å¯è¦–åŒ–                    | **Session**ï¼ˆè¡¨ç¤ºï¼‰â€»å‹•ä½œã¯ ID éä¾å­˜                | `app/(tabs)/debug.tsx`ï¼ˆ`supabase.auth.getSession()` è¡¨ç¤ºï¼‰                                                         |

å‚è€ƒï¼šGuest ID ã®å®Ÿä½“ã¯ stores/session.ts ã®ãƒ­ãƒ¼ã‚«ãƒ«æ°¸ç¶šï¼ˆAsyncStorageï¼‰ã§ã€Supabase ã® Session UID ã¨ã¯ç‹¬ç«‹ã§ã™ã€‚

ä½µå­˜ãƒ«ãƒ¼ãƒˆï¼š/app/organize/... ã‚„ /app/events/[id].tsx ãªã©ã‚¿ãƒ–å¤–ã®æ—§ãƒ«ãƒ¼ãƒˆã‚‚æ®‹ã£ã¦ã„ã¾ã™ï¼ˆä¾‹ï¼šapp/organize/events/[id]/scan.tsx ã¯ Guest ã§å‡ºå¸­ç™»éŒ²ï¼‰ã€‚é€šå¸¸é‹ç”¨ã¯ (tabs) é…ä¸‹ã«çµ±ä¸€ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯ã¯ (tabs) å´ã¸åˆã‚ã›ã‚‹ã®ãŒå®‰å…¨ã§ã™ã€‚ä»¥å‰ã®è­¦å‘Šã€ŒNo route named â€¦/qrã€ã¯ã“ã®äºŒç³»çµ±ä½µå­˜ãŒåŸå› ã§ã™ã€‚

# eventId ãŒå¿…é ˆã®ç”»é¢

å¿…é ˆï¼ˆeventId ã«å®Œå…¨ä¾å­˜ï¼‰

/(tabs)/organize/events/[id]

/(tabs)/organize/events/[id]/checkin

/(tabs)/organize/events/[id]/invite

/(tabs)/organize/events/[id]/settings

/(tabs)/organize/admin/[eventId]/liveï¼ˆ= [id]/live ã¸è»¢é€ï¼‰

æ—§ãƒ«ãƒ¼ãƒˆç¾¤ï¼š/organize/events/[id]/scan ãªã©

ä¸è¦ï¼ˆeventId ãªã—ã§æˆç«‹ï¼‰

/joinï¼ˆã‚µã‚¤ãƒ³ã‚¤ãƒ³ï¼DEV ãƒˆãƒ¼ã‚¯ãƒ³å†ç½²åæ™‚ã®ã¿ Session ã‚’ä½¿ç”¨ï¼‰

/(tabs)/eventsï¼ˆHistoryï¼šGuest ã§è‡ªåˆ†ã®ã€Œä½œæˆ/å‚åŠ ã€ã‹ã‚‰é›†è¨ˆï¼‰

/(tabs)/organizeï¼ˆä½œæˆæ™‚ã« Guest ã‚’ created_by ã¸ï¼‰

/(tabs)/profileï¼ˆè¡¨ç¤ºã®ã¿ï¼‰

/(tabs)/debugï¼ˆè¡¨ç¤ºã®ã¿ï¼‰

#ã€€é•ã†ã‚¤ãƒ™ãƒ³ãƒˆã® QR ã§ã‚‚ãƒ­ã‚°ã‚¤ãƒ³ã§ãã¦ã—ã¾ã†å•é¡Œ

äº‹å®Ÿç¢ºå®šæ¸ˆã¿ï¼šOrganizer çµŒè·¯ã§ **p_event_id ãŒãƒˆãƒ¼ã‚¯ãƒ³å´ã® eventï¼ˆBï¼‰**ã¨ã—ã¦ã‚µãƒ¼ãƒã«å±Šã„ã¦ã„ã‚‹ï¼ˆcheckin_audit.note ã§ç¢ºèªæ¸ˆã¿ï¼‰ã€‚

ã‚µãƒ¼ãƒã¯ã€Œtoken ã® event ã¨ p_event_id ãŒä¸€è‡´ãªã‚‰å—ç†ã€ãªã®ã§ã€A ç”»é¢ã§ã‚‚ B ã«è¨˜éŒ²ã•ã‚Œã¾ã™ã€‚

ã—ãŸãŒã£ã¦ã€æ®‹ã£ã¦ã„ã‚‹åŸå› ã¯ **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ã©ã“ã‹åˆ¥çµŒè·¯ãŒ token ã® event ã‚’ p_event_id ã«å…¥ã‚Œã¦ã„ã‚‹ï¼ˆã¾ãŸã¯ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯ã§ attend/checkin ãŒå‹•ã„ã¦ã„ã‚‹ï¼‰**ã“ã¨ã€‚

å†é–‹æ™‚ã®æœ€çŸ­ 3 ã‚¿ã‚¹ã‚¯ï¼ˆã©ã‚Œã‹ 1 ã¤ã§ OKï¼‰ï¼š

Organizer ã‚¹ã‚­ãƒ£ãƒŠã® RPC ç›´å‰ãƒ­ã‚°ã§ p_event_id ã‚’ä¸€åº¦ã ã‘å‡ºåŠ›ï¼ˆãƒ«ãƒ¼ãƒˆ id ã¨ä¸€è‡´ã™ã‚‹ã‹ï¼‰ã€‚

Supabase ã® API ãƒ­ã‚°ã§å®Ÿæ©Ÿã‚¹ã‚­ãƒ£ãƒ³ç›´å¾Œã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã® body ã‚’ç¢ºèªï¼ˆp_event_id ãŒä½•ã§é€ã‚‰ã‚Œã¦ã„ã‚‹ã‹ï¼‰ã€‚

ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯ãŒèµ°ã£ã¦ã„ãªã„ã‹ã€Organizer ç”»é¢ã ã‘ ãƒªãƒ³ã‚¯è‡ªå‹•é·ç§»ã‚’ç„¡åŠ¹åŒ–ã—ã¦å†ãƒ†ã‚¹ãƒˆã€‚

# expo ã§ test ã™ã‚‹ã¨ã

$pt = "$env:LOCALAPPDATA\Android\Sdk\platform-tools"
$adb = Join-Path $pt "adb.exe"
$env:Path = "$pt;$env:Path"
& $adb start-server
& $adb devices

$exp = "exp://192.168.1.203:8081"   # â†ã‚ãªãŸã® LAN URL ã«ç½®æ›
$id = "6252e880-30c7-41e5-95c2-b1cad25de83f" # å¯¾è±¡ã‚¤ãƒ™ãƒ³ãƒˆ ID
& $adb shell am start -W -a android.intent.action.VIEW `
  -d "$exp/--/organize/events/$id/checkin"

<event id>
6252e880-30c7-41e5-95c2-b1cad25de83f

# /organize ã¨ /events ã‚’å˜ä¸€ EventDetail ã¸å…±é€šåŒ–

ç›®çš„
é‡è¤‡ã—ãŸå®Ÿè£…ã‚’æ’é™¤ã—ã€ä¿®æ­£ã‚’ä¸€ç®‡æ‰€ã§å®Œçµã€‚URL ã¯ç¾çŠ¶ç¶­æŒï¼ˆå‚åŠ è€… /events/[id]ã€ä¸»å‚¬è€… /organize/events/[id]ï¼‰ã€‚

æ§‹æˆ

components/event/EventDetail.tsxï¼šå˜ä¸€ã®æœ¬ä½“ï¼ˆå–å¾—ãƒ»RSVPãƒ»GPS/QRãƒ»ãƒ­ãƒ¼ãƒ«åˆ¥ãƒœã‚¿ãƒ³ãƒ»é–‹ç™ºãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼‰ã€‚

ãƒ©ãƒƒãƒ‘ï¼š

app/(tabs)/events/[id].tsx â†’ role="attendee" ã§ EventDetail ã‚’æç”»

app/(tabs)/organize/events/[id].tsx â†’ role ã‚’æ¸¡ã—ã¦ EventDetail ã‚’æç”»

EventDetail ã®è²¬å‹™

ã‚¤ãƒ™ãƒ³ãƒˆå–å¾—ï¼ˆalias çµ±ä¸€ï¼švenue_lat:lat, venue_lng:lng, venue_radius_m:radius_m ç­‰ï¼‰

RSVP èª­ã¿/ä¿å­˜ï¼ˆevent_members.upsertï¼‰

å‡ºå¸­ç™»éŒ²ï¼ˆattendance ã¸ GPS/QR æŒ¿å…¥ï¼‰

ãƒ­ãƒ¼ãƒ«åˆ¥ UIï¼š

å‚åŠ è€…ï¼šRSVP / GPS ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ / ã‚¹ã‚­ãƒ£ãƒŠ / Google Maps

ä¸»å‚¬è€…ï¼šã‚¹ã‚­ãƒ£ãƒŠ / Check-in List / Invite / Settings / Google Maps

getEffectiveUserId() ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ ID çµ±ä¸€

å¯è¦–æ€§ãƒ«ãƒ¼ãƒ«ï¼ˆãƒœã‚¿ãƒ³æ¬ è½ã®å†ç™ºé˜²æ­¢ï¼‰

role æ˜ç¤ºãƒã‚§ãƒƒã‚¯ã§æ¡ä»¶å‡ºã—åˆ†ã‘ã€‚

å¿…é ˆãƒœã‚¿ãƒ³ã¯ãƒã‚¦ãƒ³ãƒˆå›ºå®šï¼ˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãšã‚Œã§æ¶ˆãˆãªã„ï¼‰ã€‚

ç§»è¡Œã‚¹ãƒ†ãƒƒãƒ—ï¼ˆå°ã•ãå®‰å…¨ã«ï¼‰

æ—¢å­˜æœ¬ä½“ã‚’ EventDetail.tsx ã«æŠ½å‡ºï¼ˆè¦‹ãŸç›®ä¸å¤‰ï¼‰ã€‚

/organize/.../[id].tsx ã‚’ EventDetail åˆ©ç”¨ã«ç½®ãæ›ãˆæ¤œè¨¼ã€‚

/events/[id].tsx ã‚’è–„ã„ãƒ©ãƒƒãƒ‘åŒ–ï¼ˆrole="attendee"ï¼‰ã€‚

å…±æœ‰ãƒ•ãƒƒã‚¯ã‚„ãƒ˜ãƒ«ãƒ‘ã¯å¾Œè¿½ã„ã§åˆ†é›¢ï¼ˆä»»æ„ï¼‰ã€‚

å—ã‘å…¥ã‚Œãƒã‚§ãƒƒã‚¯ï¼ˆæœ€å°ï¼‰

å‚åŠ è€… URLï¼šRSVP/GPS/Scanner/Maps ãŒè¡¨ç¤ºãƒ»å‹•ä½œã€‚

ä¸»å‚¬è€… URLï¼šScanner/Check-in List/Invite/Settings/Maps ãŒè¡¨ç¤ºãƒ»å‹•ä½œã€‚

GPS/QR å¾Œã«ã€ŒChecked-inã€ãƒ”ãƒ«ãŒå³åæ˜ ã€‚

ã‚¨ã‚¤ãƒªã‚¢ã‚¹ä¸æ•´åˆãªã—ãƒ»æœªå®šç¾©ãªã—ã€‚

OTAï¼ˆEAS Updateï¼‰ã§ä¸¡ URL åŒæ™‚ã«åæ˜ ã€‚

æ—¢çŸ¥ã®è½ã¨ã—ç©´ï¼ˆå†ç™ºé˜²æ­¢ãƒ¡ãƒ¢ï¼‰

checked_in_at_utc ã¯ DEFAULT now()ï¼ˆæ—¢å­˜ã¯åŸ‹ã‚ã¦ã‹ã‚‰ NOT NULL åŒ–ï¼‰ã€‚

Dev ç«¯æœ«ã¯å¿…ãš getEffectiveUserId() ã‚’ä½¿ã†ï¼ˆauthâ†’guest ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰ã€‚

QR ã¯ EXPO_PUBLIC_QR_SECRET ã¨ currentSlot ã‚’å…±é€šã§ã€‚

ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
ç·Šæ€¥æ™‚ã¯ /events/[id].tsx ã‚’ä¸€æ™‚çš„ã« /organize/events/[id] ã¸ router.replace()ã€‚

# ã€ŒSwipe ã§è½ã¨ã™ã¨ EXIT ãŒæ¥ãªã„ã€ã®æœ‰åŠ›åŸå› ï¼ˆå„ªå…ˆé †ï¼‰ï¼š

1. ã‚¿ã‚¹ã‚¯å®šç¾©ãŒâ€œç”»é¢å†…â€ã«ã‚ã‚‹

TaskManager.defineTask('RTA_GEOFENCE', â€¦) ãŒç”»é¢ï¼ˆä¾‹ /organize/events/[id].tsxï¼‰ã«ç½®ã‹ã‚Œã¦ã„ã‚‹ã¨ã€ãƒ—ãƒ­ã‚»ã‚¹ãŒè½ã¡ãŸå¾Œã¯å®šç¾©è‡ªä½“ãŒèª­ã¿è¾¼ã¾ã‚Œãªã„ãŸã‚ã€ENTER/EXIT ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆãŒå±Šã„ã¦ã‚‚ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹å®Ÿè¡Œã§ããªã„ã€‚

å¯¾ç­–ï¼šãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆä¾‹ src/tasks/geofence.tsï¼‰ã«å®šç¾©ã—ã€ã‚¢ãƒ—ãƒªã®ã‚¨ãƒ³ãƒˆãƒªï¼ˆapp/index.tsx ãªã©ï¼‰ã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦å¸¸æ™‚ç™»éŒ²ã—ã¦ãŠãã€‚

2. Swipe Kill å¾Œã«â€œãƒ—ãƒ­ã‚»ã‚¹å¾©å¸°ã®è¶³æ›ã‹ã‚Šâ€ãŒç„¡ã„

Android ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã§ã‚¿ã‚¹ã‚¯ã‚’æƒãã¨ã€å¸¸é§ã—ã¦ã„ãªã„é™ã‚Šãƒ—ãƒ­ã‚»ã‚¹ã‚’å³çµ‚äº†ã€‚ç´”ã‚¸ã‚ªãƒ•ã‚§ãƒ³ã‚¹ã¯ OS å´ã§ä¿æŒã•ã‚Œã‚‹ãŒã€Expo ã®ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ JS ã‚’èµ·ã“ã›ãªã„ç«¯æœ«çŠ¶æ…‹ã ã¨å‡¦ç†ãŒèµ°ã‚‰ãªã„ã“ã¨ãŒã‚ã‚‹ã€‚

å¯¾ç­–ï¼šArm æ™‚ã« è»½é‡ã® startLocationUpdatesAsyncï¼ˆforegroundService ä»˜ãï¼‰ã‚’ä¸¦èµ°ã•ã›ã€æ•°åˆ†ã€œç¶™ç¶šçš„ã«ãƒ—ãƒ­ã‚»ã‚¹ç”Ÿå­˜/å†èµ·å‹•ã®ãƒ•ãƒƒã‚¯ã‚’ä½œã‚‹ï¼ˆãƒãƒƒãƒ†ãƒªãƒ¼æœ€é©åŒ–ã¯ Unrestricted ã§å›é¿æ¸ˆã¿ï¼‰ã€‚

3. Expo Task Manager ã®åˆ¶ç´„ï¼ˆKilled çŠ¶æ…‹ï¼‰

Expo ã®ã‚¿ã‚¹ã‚¯ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ˜ç¤ºçµ‚äº†ã—ãŸçŠ¶æ…‹ã§ã¯èµ°ã‚‰ãªã„å ´åˆãŒã‚ã‚‹ï¼ˆç«¯æœ«/OS ãƒãƒ¼ã‚¸ãƒ§ãƒ³å·®ã‚ã‚Šï¼‰ã€‚Pixel ã§ã‚‚å†ç¾ä¾‹ã‚ã‚Šã€‚

å¯¾ç­–ï¼šâ‘  ã®ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«å®šç¾©ï¼‹ â‘¡ ã®å‰æ™¯ã‚µãƒ¼ãƒ“ã‚¹ä½µç”¨ã§å®Ÿå‹™ä¸Šã¯å®‰å®šã€‚

4. å†ã‚¢ãƒ¼ãƒ ã®æ°¸ç¶šåŒ–ä¸è¶³

ãƒ—ãƒ­ã‚»ã‚¹çµ‚äº†ã§ç™»éŒ²ãŒè½ã¡ã¦ã„ã‚‹ã®ã« UI ã¯ã€ŒArmedã€ã®ã¾ã¾â€¦ã¨ã„ã†é½Ÿé½¬ã€‚

å¯¾ç­–ï¼šAsyncStorage ã« armed:true, eventId, regions ã‚’ä¿å­˜ã—ã€ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã«è‡ªå‹•ã§å†ç™»éŒ²ã€‚å¿…è¦ãªã‚‰**é€šçŸ¥ã§â€œRe-armedâ€**ã‚’å‡ºã™ã€‚

5. ç«¯æœ«/OS ã®çœé›»åŠ›ãƒ»ãƒ¡ãƒ¼ã‚«ãƒ¼æŒ™å‹•

Doze ã‚„ãƒ‡ãƒã‚¤ã‚¹ã”ã¨ã®æœ€é©åŒ–ãŒãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹èµ·å‹•ã‚’æŠ‘åˆ¶ã€‚

å¯¾ç­–ï¼šæ—¢ã«è¨­å®šæ¸ˆã¿ã® Allow all the time + Battery Unrestricted ã¯æ­£è§£ã€‚SIM ã®æœ‰ç„¡ã‚„ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã¯ã‚¸ã‚ªãƒ•ã‚§ãƒ³ã‚¹è‡ªä½“ã«ã¯ç„¡é–¢ä¿‚ã€‚

## çµè«–

ã„ã¾ã¯ Home ã‚±ãƒ¼ã‚¹ã§ OK â†’ ãƒªãƒªãƒ¼ã‚¹ã§è‰¯ã„ã€‚
å¾Œã§ Swipe Kill ã‚‚å®‰å®šã•ã›ã‚‹ãªã‚‰ã€â‘  ã‚¿ã‚¹ã‚¯ã®ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«åŒ–ï¼‹ â‘¡Arm æ™‚ã«å‰æ™¯ã‚µãƒ¼ãƒ“ã‚¹ã§ keep-alive ï¼‹ â‘£ è‡ªå‹•å†ã‚¢ãƒ¼ãƒ ã€ã“ã® 3 ç‚¹ãŒæœ€ã‚‚åŠ¹æœçš„ã€‚

# Show Event QR ã‹ã‚‰æˆ»ã‚‹ã¨ History ã«è¡Œã

å¯¾è±¡ç”»é¢ï¼š/app/(tabs)/organize/events/[id]/qr.tsxï¼ˆShow Event QRï¼‰

é·ç§»å…ƒï¼š/app/(tabs)/organize/events/[id].tsxï¼ˆOrganizer ã®ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ï¼‰

ç¾è±¡ï¼šShow Event QR ã‚’é–‹ã„ãŸå¾Œã€Android ã®æˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚’ 1 å›æŠ¼ã™ã¨ History ã‚¿ãƒ– ã«æˆ»ã‚‹ã€‚ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ã«ã¯æˆ»ã‚‰ãªã„ã€‚

ä»–ç”»é¢ã®æˆ»ã‚ŠæŒ™å‹•ï¼š

Liveï¼ˆ/app/(tabs)/organize/events/[id]/live.tsxï¼‰ï¼šæˆ»ã‚‹ 1 å›ã§ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ã«æˆ»ã‚‹

Scanï¼ˆOrganizerï¼‰ï¼ˆ/app/(tabs)/organize/events/[id]/scan.tsxï¼‰ï¼šæˆ»ã‚‹ 1 å›ã§ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ã«æˆ»ã‚‹

å®Ÿæ–½æ¸ˆã¿ä½œæ¥­ï¼šlive.tsx/scan.tsx ã‚’ (tabs) é…ä¸‹ã¸ç§»å‹•æ¸ˆã¿ã€‚

è¿½åŠ ãƒ¡ãƒ¢ï¼šADB ç›´ URL ãƒ†ã‚¹ãƒˆã¯ Live ã§å®Ÿæ–½ã—ã€ç¾åœ¨ã¯ã€Œé€šå¸¸ãƒ•ãƒ­ãƒ¼ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆè©³ç´° â†’ å„ç”»é¢ï¼‰ã€ã§ã®æŒ™å‹•ã‚’ç¢ºèªæ¸ˆã¿ã€‚QR ã®ã¿ä¸Šè¨˜ã®æˆ»ã‚ŠæŒ™å‹•ã€‚

â€»Check in/invite/Setting ã‚‚æˆ»ã‚‹ã‚’æŠ¼ã™ã¨ History ã«è¡Œã£ã¦ã—ã¾ã†

### EventDetail å˜ä½“å…±é€šåŒ–ï¼šä»Šå›ã¯æ‰‹ã‚’ä»˜ã‘ãªã„ï¼ˆå¾Œç¶šã‚¿ã‚¹ã‚¯å€™è£œã¨ã—ã¦æ®ãˆç½®ãï¼‰

## Dev ãƒ­ãƒ¼ãƒ«ã‚¹ã‚¤ãƒƒãƒ ON/OFF ãƒ¡ãƒ¢ï¼ˆç¾è¡Œæ§‹æˆãƒ™ãƒ¼ã‚¹ï¼‰

### ã€Œé–‹ç™ºä¸­ã§ Dev UI ã‚’è¡¨ç¤ºã•ã›ãŸã„ã€æ™‚ã®ã‚³ãƒ¼ãƒ‰

devRole.tsx ã®ã‚³ãƒ¼ãƒ‰ã‚’

```ts
export function devSwitchEnabled(): boolean {
  const isDev = typeof __DEV__ !== "undefined" && __DEV__;

  const envEnabled =
    typeof process !== "undefined" &&
    typeof process.env !== "undefined" &&
    process.env.EXPO_PUBLIC_ENABLE_DEV_SWITCH === "1";

  return isDev || envEnabled;
}
```

### ã€Œé–‹ç™ºä¸­ã ã‘ã© Dev UI ã‚’éš ã—ãŸã„ã€æ™‚ã®ã‚³ãƒ¼ãƒ‰

**devSwitchEnabled()é–¢æ•° 1 å€‹ã¾ã‚‹ã”ã¨** ã‚’ã€ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã« å…¥ã‚Œæ›¿ãˆã‚‹ã€‚

```ts
export function devSwitchEnabled(): boolean {
  return false;
}
```

â€»å…ƒã® devSwitchEnabled()é–¢æ•°ï¼ˆä¸‹è¨˜ï¼‰ã®éƒ¨åˆ†ã¯ä¸è¦ã€‚ä¸Šã®ã‚³ãƒ¼ãƒ‰ã«å·®ã—æ›¿ãˆï¼ˆã¤ã¾ã‚Š 7 è¡Œåˆ†ã®é–¢æ•°ãŒ 2 è¡Œã«ãªã‚‹ï¼‰

```ts
export function devSwitchEnabled(): boolean {
  const isDev = typeof __DEV__ !== "undefined" && __DEV__;

  const envEnabled =
    typeof process !== "undefined" &&
    typeof process.env !== "undefined" &&
    process.env.EXPO_PUBLIC_ENABLE_DEV_SWITCH === "1";

  return isDev || envEnabled;
}
```

### ã€Œã‚¹ãƒˆã‚¢å…¬é–‹ç”¨ãƒ“ãƒ«ãƒ‰ï¼ˆæœ¬ç•ªï¼‰ã€ã®ã¨ã

ã‚³ãƒ¼ãƒ‰ã¯ ãƒ‘ã‚¿ãƒ¼ãƒ³ â‘  ã®ã¾ã¾ï¼ˆä½•ã‚‚å¤‰ãˆãªã„ï¼‰ï¼š

```ts
export function devSwitchEnabled(): boolean {
  const isDev = typeof __DEV__ !== "undefined" && __DEV__;

  const envEnabled =
    typeof process !== "undefined" &&
    typeof process.env !== "undefined" &&
    process.env.EXPO_PUBLIC_ENABLE_DEV_SWITCH === "1";

  return isDev || envEnabled;
}
```

ãã®ã†ãˆã§ã€eas.json ã®æœ¬ç•ªãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã«
EXPO_PUBLIC_ENABLE_DEV_SWITCH: "1" ã‚’æ›¸ã‹ãªã„ã€‚

âœ… æ­£ã—ã„ä¾‹ï¼ˆæœ¬ç•ªã«ã¯æ›¸ã‹ãªã„ï¼‰ï¼š

```json

"production": {
  "developmentClient": false,
  "distribution": "store"
}

```

âŒ ãƒ€ãƒ¡ãªä¾‹ï¼ˆæœ¬ç•ªã«ã‚‚æ›¸ã„ã¡ã‚ƒã£ã¦ã‚‹ï¼‰ï¼š

```json
"production": {
  "developmentClient": false,
  "distribution": "store",
  "env": {
    "EXPO_PUBLIC_ENABLE_DEV_SWITCH": "1"
  }
}



```

3ï¸âƒ£ ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã¨ã

æœ¬ç•ªã¯ã“ã†å®Ÿè¡Œã™ã‚‹ã ã‘ï¼š

```bash

eas build --profile production --platform android
# or
eas build --profile production --platform ios

```

è¦ã™ã‚‹ã«ï¼š

**Dev ç”¨ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆpreview ãªã©ï¼‰**ã«ã¯
env.EXPO_PUBLIC_ENABLE_DEV_SWITCH: "1" ã‚’æ›¸ã„ã¦ OK

**æœ¬ç•ªç”¨ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆproduction ãªã©ï¼‰**ã«ã¯
ãã®ã‚­ãƒ¼ã‚’ æ›¸ã‹ãªã„ï¼ˆenv ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã”ã¨ç„¡ã—ã§ã‚‚ OKï¼‰

## 12 äºº Ã—14 æ—¥ãƒ†ã‚¹ãƒˆ

### â–  å…¬å¼ã‚µã‚¤ãƒˆ

ã‚µã‚¤ãƒˆåï¼š12 Testers

URLï¼š12testers.com
12 testers

é‹å–¶ï¼šRemob Academy LTDï¼ˆã‚¤ã‚®ãƒªã‚¹ç™»éŒ²ï¼‰
Google Play
+1

ã“ã“ã‹ã‚‰ç”³ã—è¾¼ã‚ã° OK ã§ã™ã€‚
ãƒˆãƒƒãƒ—ã«ã§ã‹ã ã€ŒTest Your App For 14 Day ! 12 Testers !ã€ ã¨å‡ºã¦ã„ã‚‹ã‚µã‚¤ãƒˆã§ã™ã€‚
12 testers

### â–  æœ‰æ–™ãƒ—ãƒ©ãƒ³åï¼ˆ12testers.comï¼‰

å…¨éƒ¨ã€Œ12 äººã®ãƒ†ã‚¹ã‚¿ãƒ¼ãŒ 14 æ—¥é–“ãƒ†ã‚¹ãƒˆã€ãŒãƒ™ãƒ¼ã‚¹ã§ã€ä¸»ã«é•ã†ã®ã¯ã‚¢ãƒ—ãƒªã‚µã‚¤ã‚ºãƒ»ã‚µãƒãƒ¼ãƒˆå†…å®¹ã§ã™ã€‚
12 testers

-Starter Plan

ç›®å®‰ä¾¡æ ¼ï¼š$22.99 / app

å¯¾è±¡ï¼šã‚¢ãƒ—ãƒªã‚µã‚¤ã‚º 1ã€œ250MB

å†…å®¹ï¼š12 å°ã®å®Ÿæ©Ÿã§ 14 æ—¥é–“ãƒ•ãƒ«ãƒ†ã‚¹ãƒˆ

-Pro Plan

ç›®å®‰ä¾¡æ ¼ï¼š$26.99 / app

å¯¾è±¡ï¼šã‚¢ãƒ—ãƒªã‚µã‚¤ã‚º 1ã€œ500MB

Starter ã®å†…å®¹ï¼‹

AnyDesk ã§ã®ãƒªãƒ¢ãƒ¼ãƒˆã‚µãƒãƒ¼ãƒˆ

æå‡ºãƒ—ãƒ­ã‚»ã‚¹ã®ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹ä»˜ã

-Bulk Plan

ç›®å®‰ä¾¡æ ¼ï¼š$34.99ã€œï¼ˆè¤‡æ•°ã‚¢ãƒ—ãƒªå‘ã‘ï¼‰

5 æœ¬ä»¥ä¸Šã¾ã¨ã‚ã¦ãƒ†ã‚¹ãƒˆã—ãŸã„äººå‘ã‘

-Business Plan

ç›®å®‰ä¾¡æ ¼ï¼š$59.99 / 10 appsï¼ˆã¾ã¨ã‚å‰²ï¼‰

Ken å‘ã‘ã®ç¾å®Ÿçš„ãªé¸æŠè‚¢ï¼š

ã‚¢ãƒ—ãƒª 1 æœ¬ã ã‘ãªã‚‰
ğŸ‘‰ Starter Planï¼ˆå®‰ãã¦ååˆ†ï¼‰ã‹
ğŸ‘‰ ã€Œã‚µãƒãƒ¼ãƒˆä»˜ããŒå®‰å¿ƒãªã‚‰ã€Pro Plan

## unmatched root ã«ã¤ã„ã¦

ä»Šå›ã® ã€Œæ–°è¦ç™»éŒ²å¾Œã« Unmatched Routeã€ å•é¡Œã¯ã€ã“ã†æ•´ç†ã§ãã¾ã™ã€‚

1. ç—‡çŠ¶

æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ /join â†’ ã‚µã‚¤ãƒ³ã‚¤ãƒ³ â†’ user_profile ãŒç„¡ã„ã®ã§ /register ã¸

/register ã§ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä¿å­˜ï¼ˆåå‰ãƒ»roleï¼‰ã‚’æŠ¼ã—ãŸç›´å¾Œã«
é»’èƒŒæ™¯ã® â€œUnmatched Route / Page could not be foundâ€ ãŒå‡ºã‚‹

ç”»é¢ä¸‹ã® Sitemap ã‚’æŠ¼ã™ã¨ã€ç’°å¢ƒã«ã‚ˆã£ã¦ã¯ çœŸã£é»’ã«ãªã‚‹ã“ã¨ãŒã‚ã£ãŸï¼ˆåŸå› ç‰¹å®šã«ä½¿ãˆãªã„ï¼‰

2. æ±ºå®šçš„ãªè¨¼æ‹ ï¼ˆãƒ­ã‚°ï¼‰

ã‚ãªãŸãŒå–ã£ãŸãƒ­ã‚°ã§ã€ä»¥ä¸‹ãŒå‡ºã¦ã„ãŸï¼š

[register] saved -> /(tabs) with role = attendee

â†’ ä¿å­˜å¾Œã®é·ç§»å…ˆãŒ /(tabs) ã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒç¢ºå®šã€‚

3. æ ¹æœ¬åŸå› ï¼ˆRoot Causeï¼‰

Expo Router ã® **(tabs) ã¯ã€Œã‚°ãƒ«ãƒ¼ãƒ—åã€**ã§ã€å®Ÿåœ¨ã™ã‚‹ URL ãƒ«ãƒ¼ãƒˆã§ã¯ãªã„

ã¤ã¾ã‚Š router.replace("/(tabs)") ã¯ â€œå­˜åœ¨ã—ãªã„ç”»é¢â€ ã¸é·ç§»ã—ã‚ˆã†ã¨ã—ã¦ã—ã¾ã„ã€çµæœã¨ã—ã¦ Unmatched Route ã«ãªã‚‹

ä»¥å‰ã‚ãªãŸãŒç›´ã—ãŸã€Œ`index.tsx ã§ /(tabs) ã«é£›ã¶ã¨ãƒ€ãƒ¡ã€å•é¡Œã¨åŒç¨®ã®ãƒã‚°ãŒã€ä»Šå›ã¯ register å´ã«æ®‹ã£ã¦ã„ãŸã€‚

4. ä¿®æ­£æ–¹é‡

ä¿å­˜å¾Œã®é·ç§»ã‚’ /(tabs) ã®ã‚ˆã†ãªã‚°ãƒ«ãƒ¼ãƒ—åã«ã›ãšã€å®Ÿåœ¨ã™ã‚‹ãƒ«ãƒ¼ãƒˆã¸å¤‰æ›´

ã•ã‚‰ã«å®‰å…¨ãªè¨­è¨ˆã¨ã—ã¦ã€ãƒ­ã‚°ã‚¤ãƒ³/åˆæœŸåŒ–/ãƒ­ãƒ¼ãƒ«åæ˜ ã®è²¬å‹™ã‚’ /index ã«ä¸€å…ƒåŒ–ã™ã‚‹ï¼ˆã‚ãªãŸã® join ä¿®æ­£ã¨åŒã˜æ€æƒ³ï¼‰

5. å®Ÿéš›ã®ä¿®æ­£å†…å®¹

app/register.tsx ã®ä¿å­˜å¾Œé·ç§»ã‚’

router.replace("/(tabs)") âŒ

router.replace("/") âœ…ï¼ˆ= /index ã«æˆ»ã™ï¼‰
ã«å¤‰æ›´

6. ãªãœ Sitemap ãŒé»’ããªã£ãŸï¼Ÿ

Sitemap ãŒé»’ããªã‚‹ã®ã¯ ç’°å¢ƒå·®ãƒ»ãƒ‡ãƒãƒƒã‚° UI ã®è¡¨ç¤ºä¸å…·åˆã®å¯èƒ½æ€§ãŒé«˜ã„

ã ã‹ã‚‰ä»Šå›ã¯ Sitemap ã§ã¯ãªããƒ­ã‚°ã§åŸå› ç¢ºå®šã—ãŸã®ãŒæ­£è§£ãƒ«ãƒ¼ãƒˆ

7. å†ç™ºé˜²æ­¢ãƒŸãƒ‹ãƒã‚§ãƒƒã‚¯

router.replace("/(tabs)") / "/(auth)" ãªã© ã‚°ãƒ«ãƒ¼ãƒ—åã ã‘ã«é£›ã°ãªã„

é·ç§»å…ˆã¯å¿…ãš Sitemap ã«è¼‰ã‚‹â€œå®Ÿåœ¨ã™ã‚‹ç”»é¢â€ï¼ˆä¾‹ï¼š/events ã‚„ /organize/...ï¼‰ã‹ã€/ï¼ˆindex ä¸€å…ƒåŒ–ï¼‰ã«ã™ã‚‹

Unmatched ãŒå‡ºãŸã‚‰ã¾ãš **ã€Œç›´å‰ã® router.replace ã®è¡Œãå…ˆãƒ­ã‚°ã€**ã§ç¢ºå®šã™ã‚‹

### Root ã®ãƒŸã‚¹ãƒãƒƒãƒã«é–¢ã—ã¦å°†æ¥åŒã˜ã‚ˆã†ãªå•é¡ŒãŒèµ·ããŸã¨ãã®ãƒŸãƒ‹ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

ã¾ãš Sitemap ã‚’è¦‹ã‚‹

Unmatched Route ãŒå‡ºãŸã‚‰ã€å³ä¸‹ã®ã€ŒSitemapã€ã‚’ã‚¿ãƒƒãƒ—ã€‚

ç¾åœ¨ã®ãƒ‘ã‚¹ã¨ãƒ«ãƒ¼ãƒˆä¸€è¦§ã‚’ç¢ºèªã€‚

ã€Œé£›ã¼ã†ã¨ã—ã¦ã„ã‚‹ãƒ‘ã‚¹ã€ãŒãƒ«ãƒ¼ãƒˆä¸€è¦§ã«å­˜åœ¨ã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã€‚

index / join ã®é·ç§»å…ˆã‚’ç¢ºèªã™ã‚‹

ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ã‚„ profile èª­ã¿è¾¼ã¿ã‚’ã—ã¦ã„ã‚‹ç”»é¢ï¼ˆä»Šå›ãªã‚‰ /indexï¼‰ã‚’ç‰¹å®šã€‚

ãƒ­ã‚°ã‚¤ãƒ³å¾Œã« å¿…ãšãã“ã‚’çµŒç”±ã™ã‚‹è¨­è¨ˆã«ãªã£ã¦ã„ã‚‹ã‹ï¼ˆrouter.replace("/") ãªã©ï¼‰ã‚’ç¢ºèªã€‚

é€”ä¸­ã§ç›´æ¥ã‚¿ãƒ–ã‚„åˆ¥ç”»é¢ã«é£›ã‚“ã§ã„ãªã„ã‹ã‚’è¦‹ã‚‹ã€‚

expo-router ã®ã‚°ãƒ«ãƒ¼ãƒ—åã«æ³¨æ„

app/(tabs)/... ã® (tabs) ã¯ URL ã«ç¾ã‚Œãªã„ã‚°ãƒ«ãƒ¼ãƒ—åã€‚

router.replace("/(tabs)") ã®ã‚ˆã†ã«ã€ã‚°ãƒ«ãƒ¼ãƒ—ã ã‘ã®ãƒ‘ã‚¹ã«ã¯é£›ã°ãªã„ã‚ˆã†ã«ã™ã‚‹ã€‚

å¿…ãšå®Ÿåœ¨ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ï¼ˆä¾‹ï¼š/events / / (tabs)/eventsï¼‰ã«é£›ã¶ã€‚

ãƒ­ã‚°ã§æµã‚Œã‚’è¿½ã†

console.info ã§

ã‚»ãƒƒã‚·ãƒ§ãƒ³æœ‰ç„¡

user_profile ã® role

router.replace ã®è¡Œãå…ˆ

ã‚’å‡ºã—ã¦ãŠãã¨ã€ã©ã“ã§ä½•ã«é£›ã‚“ã§ã„ã‚‹ã‹å¾Œã‹ã‚‰è¿½ã„ã‚„ã™ã„ã€‚

## APK ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«ã¤ã„ã¦

å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆç”¨ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ï¼ˆAPK ç”¨ï¼‰ â€¦ ä¾‹ï¼špreview ã‚’ã€Œãƒ†ã‚¹ãƒˆå°‚ç”¨ã€ã«å›ºå®š

distribution: "internal"

android.buildType: "apk"

env ã§ APP_ENV=internal

ã‚¹ãƒˆã‚¢ç”¨ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ï¼ˆAAB ç”¨ï¼‰ â€¦ ä¾‹ï¼šproduction

distribution: "store"

AABï¼ˆä»Šä½œã£ãŸã‚„ã¤ã¨åŒã˜ç³»çµ±ï¼‰

ã“ã‚Œã¯ Google Play ã«å‡ºã—ãŸããªã£ãŸã¨ãã ã‘ä½¿ã†

# ãƒ•ã‚§ãƒ¼ã‚º Aï¼šã‚¢ãƒ—ãƒªå´ã®ä¿®æ­£ï¼ˆLocation èª¬æ˜ç”»é¢ï¼‰

## A-1. æ–°ã—ã„ç”»é¢ location-disclosure ã‚’è¿½åŠ 

app/location-disclosure.tsx ã‚’æ–°è¦ä½œæˆ

ç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼š

Titleï¼šLocation access for attendance verification

Bodyï¼šå‰å›æ±ºã‚ãŸ 4 æ–‡ï¼ˆèƒŒæ™¯ä½ç½®æƒ…å ±ï¼ç›®çš„ï¼åºƒå‘Šã«ã¯ä½¿ã‚ãªã„ï¼è¨­å®šã§å¤‰æ›´å¯ï¼‰

ãƒœã‚¿ãƒ³ï¼š

Continueï¼ˆãƒ¡ã‚¤ãƒ³ï¼‰

Cancelï¼ˆã‚µãƒ–ï¼‰

ãƒœã‚¿ãƒ³ã®å‹•ãï¼š

Continueï¼š

AsyncStorage ã« @geoattendance.locationDisclosure.v1 = "accepted" ã‚’ä¿å­˜

next ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’èª­ã‚“ã§ router.replace(next || "/")

Cancelï¼š

ãƒ•ãƒ©ã‚°ã¯ ä¿å­˜ã—ãªã„

router.replace(next || "/") ã§æˆ»ã‚‹ã ã‘ï¼ˆãƒã‚§ãƒƒã‚¯é–‹å§‹ã—ãªã„ï¼‰

âœ… ã“ã“ã§ã¯ Location Permission ã‚’ç›´æ¥ãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ãªã„ï¼ˆã‚ãã¾ã§èª¬æ˜å°‚ç”¨ç”»é¢ï¼‰ã€‚

## A-2. Start attendee check ãƒœã‚¿ãƒ³ã®ãƒ•ãƒ­ãƒ¼ã‚’å¤‰æ›´ï¼ˆLive ç”»é¢ï¼‰

å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ï¼šapp/(tabs)/organize/events/[id]/live.tsx

Start attendee check ãƒœã‚¿ãƒ³ã®ãƒãƒ³ãƒ‰ãƒ©ï¼ˆhandleArmGeofenceï¼‰å†…ã§ï¼š

AsyncStorage ã‹ã‚‰ @geoattendance.locationDisclosure.v1 ã‚’èª­ã¿è¾¼ã‚€

åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ï¼š

accepted ã§ãªã„å ´åˆï¼š

router.push({ pathname: "/location-disclosure", params: { next: /organize/events/${id}/live } })

â†’ ã“ã®æ™‚ç‚¹ã§ã¯ geofence ã¯ã¾ã ã‚¹ã‚¿ãƒ¼ãƒˆã—ãªã„

accepted ã®å ´åˆï¼š

ä»Šã¾ã§é€šã‚Šï¼š

ensurePermissions()ï¼ˆlib/geofenceActions.tsï¼‰

OK ãªã‚‰ armGeofenceAt(point, radius) ã‚’å‘¼ã¶

âœ… èª¬æ˜ç”»é¢ã‹ã‚‰æˆ»ã£ã¦ããŸã‚ã¨ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚‚ã†ä¸€åº¦ Start attendee check ã‚’æŠ¼ã—ãŸã¨ãã« geofence ãŒèµ·å‹•ã™ã‚‹ä»•æ§˜ã§å›ºå®šã€‚

## A-3. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”¨ APK ã§å‹•ä½œç¢ºèª

eas build --platform android --profile preview ã§ APK ã‚’ä½œæˆã—ã¦ã€å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆï¼š

ã€Œåˆå›ã€ã®å‹•ã

Live ç”»é¢ã§ Start attendee check ã‚’æŠ¼ã™

â†’ èª¬æ˜ç”»é¢ãŒå‡ºã‚‹

â†’ Continue ã§ Live ã«æˆ»ã‚‹

â†’ ã‚‚ã†ä¸€åº¦ Start attendee check

â†’ OS ã® Location è¨±å¯ï¼ˆAllow all the timeï¼‰ãŒå‡ºã‚‹

â†’ è¨±å¯ â†’ geofence ONï¼ˆãƒ©ãƒ™ãƒ«å¤‰åŒ–ãªã©ç¢ºèªï¼‰

Cancel ã®å‹•ã

Start attendee check â†’ èª¬æ˜ç”»é¢ â†’ Cancel

â†’ Live ã«æˆ»ã‚‹ãŒ geofence ã¯å‹•ã‹ãªã„

â†’ å†åº¦ Start attendee check æŠ¼ã™ã¨ã€ã¾ãŸèª¬æ˜ç”»é¢ãŒå‡ºã‚‹

2 å›ç›®ä»¥é™

ä¸€åº¦ Continue ã—ã¦ã„ã‚Œã°ã€æ¬¡ã‹ã‚‰ã¯ Start attendee check æŠ¼ä¸‹ â†’ ã„ããªã‚Š ensurePermissions() â†’ geofence ON ã«ãªã‚‹ã“ã¨ã‚’ç¢ºèª

# ãƒ•ã‚§ãƒ¼ã‚º Bï¼šæœ¬ç•ªç”¨ãƒ“ãƒ«ãƒ‰ & Play Console å·®ã—æ›¿ãˆ. å®Œäº† â˜‘ï¸

## B-1. æœ¬ç•ªç”¨ AAB v4 ã‚’ä½œæˆï¼ˆæ¸ˆï¼‰

eas build --platform android --profile production

versionName: 1.0.0

versionCode: 4

## B-2. Play Console ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

â‘  å†…éƒ¨ãƒ†ã‚¹ãƒˆãƒˆãƒ©ãƒƒã‚¯ï¼ˆv1-internalï¼‰ â†’ å®Œäº†

æ—¢å­˜ã® 1.0.0 (3) ãƒªãƒªãƒ¼ã‚¹ã‚’ãƒ™ãƒ¼ã‚¹ã«æ–°ã—ã„ãƒªãƒªãƒ¼ã‚¹ã‚’ä½œæˆ

AAB ã‚’ v4ï¼ˆversionCode 4ï¼‰ã«å·®ã—æ›¿ãˆ

ãƒªãƒªãƒ¼ã‚¹å: 1.0.0 (4) internal

å•é¡Œãªã—ã§ã€Œä¿å­˜ã—ã¦å…¬é–‹ã€ã¾ã§å®Œäº†

â‘¡ ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆãƒˆãƒ©ãƒƒã‚¯ï¼ˆ12testersï¼‰ â†’ å‹•ç”» URL ãŒãªã„ã¨å®Œäº†ä¸å¯

åŒã˜ AAB v4 ã‚’ä½¿ã£ã¦ãƒªãƒªãƒ¼ã‚¹ 4 ã‚’ä½œæˆ

ãƒªãƒªãƒ¼ã‚¹å: 1.0.0 (4)

ã“ã“ã§ Play Console ã‹ã‚‰ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ï¼š

ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ URL

ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤ãƒšãƒ¼ã‚¸ URL

ä½ç½®æƒ…å ±ã®åˆ©ç”¨è¨±å¯ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆå‹•ç”» URL ã‚’å«ã‚€ï¼‰

âš  é‡è¦ï¼šã“ã®ã€Œä½ç½®æƒ…å ±ã®åˆ©ç”¨è¨±å¯ã€ãƒ•ã‚©ãƒ¼ãƒ ã§
ã€Œå‹•ç”»ã§ã®æ‰‹é †ã®èª¬æ˜ã€æ¬„ã«æœ‰åŠ¹ãª URL ã‚’å…¥ã‚Œãªã„ã¨ã€
ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆã®ãƒªãƒªãƒ¼ã‚¹ã‚’ä¿å­˜ã§ããªã„ã€‚
â†’ å‹•ç”» URL ã¯çµ¶å¯¾ã«ã‚¹ã‚­ãƒƒãƒ—ä¸å¯ã€‚

ãã®ãŸã‚ã€å®Ÿéš›ã®ä½œæ¥­é †åºã¯ï¼š

ãƒ•ã‚§ãƒ¼ã‚º C ã§å‹•ç”»ã‚’ä½œã£ã¦ YouTube URL ã‚’ç”¨æ„ âœ ãã® URL ã‚’ä½ç½®æƒ…å ±ãƒ•ã‚©ãƒ¼ãƒ ã«å…¥ã‚Œã¦ã‹ã‚‰ã€B-2 ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆãƒªãƒªãƒ¼ã‚¹ã‚’å®Œäº†

# ãƒ•ã‚§ãƒ¼ã‚º Cï¼šå¯©æŸ»ç”¨ã®å‹•ç”»ä½œæˆ & ãƒ•ã‚©ãƒ¼ãƒ è¨˜å…¥ã€€å®Œäº† â˜‘ï¸

ï¼ˆâ€»ã“ã“ãŒ B-2 ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆå®Œäº†ã®å¿…é ˆæ¡ä»¶ï¼‰

## C-1. Pixel ã« v5 ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

å†…éƒ¨ãƒ†ã‚¹ãƒˆãƒˆãƒ©ãƒƒã‚¯ã‹ã‚‰ Play Store çµŒç”±ã§ v5 ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ã‚¢ãƒ—ãƒªå†…ã§ versionCode 5 ã«ãªã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª

## C-2. ç”»é¢éŒ²ç”»ï¼ˆ30ã€œ40 ç§’ï¼‰

ã‚·ãƒŠãƒªã‚ªï¼ˆè‹±èª UI å‰æï¼‰ï¼š

GeoAttendance ã‚’èµ·å‹•

Organizer ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆå¿…è¦ãªã‚‰ï¼‰

å¯¾è±¡ã‚¤ãƒ™ãƒ³ãƒˆã® Live ç”»é¢ã‚’é–‹ã

Start attendee check ã‚’ã‚¿ãƒƒãƒ—

æ–°ã—ã„ Location èª¬æ˜ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹

Continue ã‚’æŠ¼ã™

OS ã® Location è¨±å¯ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã§ Allow all the time ã‚’é¸æŠ

Live ç”»é¢ã¸æˆ»ã‚‹

ã‚‚ã†ä¸€åº¦ Start attendee check ã‚’æŠ¼ã—ã¦ã€ãƒã‚§ãƒƒã‚¯ãŒé–‹å§‹ã•ã‚ŒãŸçŠ¶æ…‹ã‚’æ•°ç§’æ˜ ã™

éŒ²ç”»åœæ­¢

## C-3. YouTube ã«ã‚¢ãƒƒãƒ— & Play å´ã«ç™»éŒ²

ï¼ˆã“ã“ãŒ å‹•ç”» URL å¿…é ˆãƒã‚¤ãƒ³ãƒˆï¼‰

éŒ²ç”»å‹•ç”»ã‚’ PC ã«ã‚³ãƒ”ãƒ¼

YouTube ã«ã€Œé™å®šå…¬é–‹ã€ã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

å‹•ç”»ã® URL ã‚’ã‚³ãƒ”ãƒ¼

Play Console â†’ ã‚¢ãƒ—ãƒªã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ â†’ ä½ç½®æƒ…å ±ã®åˆ©ç”¨è¨±å¯

ã™ã§ã«å…¥åŠ›ã—ãŸèª¬æ˜ãƒ†ã‚­ã‚¹ãƒˆï¼ˆç›®çš„ / èƒŒæ™¯ã‚¢ã‚¯ã‚»ã‚¹ç†ç”±ï¼‰ã‚’ç¢ºèª

ã€Œå‹•ç”»ã§ã®æ‰‹é †ã®èª¬æ˜ã€æ¬„ã« YouTube ã® URL ã‚’å¿…ãšå…¥åŠ›

ä¿å­˜

ã“ã“ã¾ã§çµ‚ã‚ã‚‹ã¨ã€ã€Œä½ç½®æƒ…å ±ã®åˆ©ç”¨è¨±å¯ã€ãƒ•ã‚©ãƒ¼ãƒ ã®ã‚¨ãƒ©ãƒ¼ãŒæ¶ˆãˆã€
B-2 ã®ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆãƒªãƒªãƒ¼ã‚¹ã‚’ä¿å­˜ã§ãã‚‹çŠ¶æ…‹ã«ãªã‚‹ã€‚

# ãƒ•ã‚§ãƒ¼ã‚º Dï¼šã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆå…¬é–‹ & 12testers å®Ÿè¡Œã€€ã€€å®Œäº† â˜‘ï¸

## D-1. ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆãƒˆãƒ©ãƒƒã‚¯ã‚’å…¬é–‹

ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒˆãƒ©ãƒƒã‚¯ï¼ˆ12testersï¼‰ã®ãƒªãƒªãƒ¼ã‚¹ 5(versionCode 5) ã‚’é–‹ã

ã‚¨ãƒ©ãƒ¼ãŒç„¡ã„ã“ã¨ã‚’ç¢ºèª

ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ URL: GitHub Pages ã®æ–° URL

ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤ãƒšãƒ¼ã‚¸ URL: åŒã˜ãæœ‰åŠ¹

ä½ç½®æƒ…å ±ã®åˆ©ç”¨è¨±å¯ãƒ•ã‚©ãƒ¼ãƒ : ãƒ†ã‚­ã‚¹ãƒˆ + å‹•ç”» URL æ¸ˆ

ã€Œä¿å­˜ã—ã¦å…¬é–‹ã€ã‚’æŠ¼ã—ã¦ã€ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆã‚’æœ‰åŠ¹åŒ–

## D-2. 12testers å´ã®æ‰‹é…

12testers ã®ã‚µãƒ¼ãƒ“ã‚¹ã§ã€Œ14 æ—¥é–“ Ã— 12 äººã€ã®ãƒ—ãƒ©ãƒ³ã‚’è³¼å…¥

ãƒ†ã‚¹ã‚¿ãƒ¼ã«å…±æœ‰ã™ã‚‹æƒ…å ±ï¼š

ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆã®æ‹›å¾… URL

å¯¾è±¡å›½ï¼šã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢ç­‰ï¼ˆæ—¢ã« 177 ã‚«å›½è¨­å®šæ¸ˆã¿ï¼‰

14 æ—¥é–“ãƒ†ã‚¹ãƒˆã—ã¦ã‚‚ã‚‰ã„ã€Play ã®æ¡ä»¶

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«äººæ•° / åˆ©ç”¨æ—¥æ•° / ã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ•°
ã‚’æº€ãŸã™

##ã€€ test æœŸé–“ä¸­ã®å‹•ã

1. ã©ã‚“ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãŒæ¥ã‚‹ã®ã‹

Testers Community å´ã§ã¯ã€ãƒ†ã‚¹ã‚¿ãƒ¼ãŒå®Ÿæ©Ÿã§è§¦ã£ãŸçµæœã‚’ã¾ã¨ã‚ã¦ãã‚Œã¾ã™ã€‚å†…å®¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ï¼š

ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ / ãƒ•ãƒªãƒ¼ã‚ºãªã©ã®è‡´å‘½çš„ãƒã‚°

ç”»é¢é·ç§»ã‚„æ–‡è¨€ã®ä½¿ã„å‹æ‰‹ã®æŒ‡æ‘˜

ã©ã®ç«¯æœ«ãƒ»OS ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§è©¦ã—ãŸã‹ã¨ã„ã£ãŸç’°å¢ƒæƒ…å ±

å¿…è¦ã«å¿œã˜ã¦ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ

ã“ã‚Œã‚‰ã¯ãƒ†ã‚¹ãƒˆæœŸé–“ä¸­ã«å°‘ã—ãšã¤æºœã¾ã£ã¦ã„ãã€ãƒ†ã‚¹ãƒˆçµ‚äº†æ™‚ã«ã¾ã¨ã¾ã£ãŸãƒ¬ãƒãƒ¼ãƒˆãŒè¦‹ã‚‰ã‚Œã‚‹ã€ã¨ã„ã†æµã‚Œã«ãªã‚Šã¾ã™ã€‚

2. ã©ã‚Œãã‚‰ã„ã®é »åº¦ã§è¦‹ã‚Œã°ã„ã„ï¼Ÿ

ãŠã™ã™ã‚ã¯ï¼š

1 æ—¥ 1 å›ã ã‘ Dashboard ã‚’é–‹ã

ç”»é¢ä¸‹ã® GeoAttendance ã‚«ãƒ¼ãƒ‰ã®ã€ŒView Detailsã€ã‚’ã‚¯ãƒªãƒƒã‚¯

æ–°ã—ã„ãƒ¬ãƒãƒ¼ãƒˆã‚„ Issue ãŒå¢—ãˆã¦ã„ãªã„ã‹ã‚’è¦‹ã‚‹

å¿™ã—ã„æ—¥ã¯ 2ã€œ3 æ—¥ã« 1 å› ã§ã‚‚ OK

ã„ãšã‚Œã«ã›ã‚ˆã€å¤§é‡ã«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ã•ã‚Œã‚‹ã‚‚ã®ã§ã¯ãªã„ã®ã§ã€å¼µã‚Šä»˜ãå¿…è¦ã¯ãªã„ã§ã™ã€‚

ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ãŒæ¥ã‚‹ã“ã¨ã‚‚å¤šã„ã®ã§ã€
Testers Community ã‹ã‚‰ã®ãƒ¡ãƒ¼ãƒ«ã ã‘ã¯è¦‹é€ƒã•ãªã„ã‚ˆã†ã«ã—ã¦ãŠã‘ã°å®‰å¿ƒã§ã™ã€‚

3. ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãŒæ¥ãŸã¨ãã®å¯¾å‡¦ã®ä»•æ–¹ï¼ˆãŠã™ã™ã‚ã®å‹•ãï¼‰

å†…å®¹ã‚’ã–ã£ã¨åˆ†é¡ã™ã‚‹

Aï¼šã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãƒ»ãƒ•ãƒªãƒ¼ã‚ºãƒ»ãƒ­ã‚°ã‚¤ãƒ³ä¸èƒ½ãªã©ã®è‡´å‘½çš„ãƒã‚°

Bï¼šä½ç½®æƒ…å ±ã®æŒ™å‹•ãŒãŠã‹ã—ã„ã€Start attendee check ãŒå‹•ã‹ãªã„ ãªã©ã®é‡è¦ãƒã‚°

Cï¼šUI/UX ã‚„æ–‡è¨€ãªã©ã€ç›´ã›ãŸã‚‰å¬‰ã—ã„ã‘ã©å¾Œå›ã—ã§ã‚‚ OK ãªæ”¹å–„ç‚¹

A/B ã¯ã§ãã‚‹ã ã‘ãƒ†ã‚¹ãƒˆæœŸé–“ä¸­ã«å†ç¾ï¼†ä¿®æ­£ã‚’æ¤œè¨

è‡ªåˆ†ã® Pixel ã§åŒã˜æ‰‹é †ã‚’è©¦ã—ã¦å†ç¾ã™ã‚‹

åŸå› ãŒã¯ã£ãã‚Šã—ã¦ã€ä¿®æ­£ãŒå°ã•ãæ¸ˆã¿ãã†ãªã‚‰
â†’ v6 ãªã©ã®æ–°ãƒ“ãƒ«ãƒ‰ã‚’ä½œã£ã¦ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆã«å·®ã—æ›¿ãˆ
ï¼ˆä»Šã¾ã§ã¨åŒã˜æ‰‹é †ã§ AAB ã‚’ã‚¢ãƒƒãƒ—ã™ã‚Œã°ã€ãƒ†ã‚¹ã‚¿ãƒ¼ã¯è‡ªå‹•ã§æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã¾ã™ï¼‰

é€†ã«ã€æ ¹ãŒæ·±ãã†ãªãƒã‚°ã‚„å¤§ããªä»•æ§˜å¤‰æ›´ã«ãªã‚Šãã†ãªã‚‰
â†’ ã€Œæ—¢çŸ¥ã®å•é¡Œã€ã¨ã—ã¦ãƒ¡ãƒ¢ã—ã¦ãŠãã€æœ¬ç•ªå…¬é–‹å¾Œã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå€™è£œã«å›ã™

Cï¼ˆæ”¹å–„ç³»ï¼‰ã¯ãƒ¡ãƒ¢ã«å›ã™

Notion ã‚„ GitHub Issuesã€ç°¡å˜ãªãƒ¡ãƒ¢ã§ã‚‚ã„ã„ã®ã§
ã€Œæœ¬ç•ªå…¬é–‹å¾Œã«ã‚„ã‚‹æ”¹å–„ãƒªã‚¹ãƒˆã€ã¨ã—ã¦æºœã‚ã¦ãŠã

ä»Šã®ãƒ•ã‚§ãƒ¼ã‚ºã®æœ€å„ªå…ˆã¯ ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãªãå®‰å®šã—ã¦å‹•ãã“ã¨ ãªã®ã§ã€æ¬²å¼µã‚Šã™ããªã„ã®ãŒå¤§äº‹

4. ã„ã¾ Ken ãŒã‚„ã‚‹ã“ã¨ã®ã¾ã¨ã‚

âœ… Testers Community ã® Dashboard ã« GeoAttendance ãŒã€ŒIn testingã€ã§å‡ºã¦ã„ã‚‹ã®ã‚’ç¢ºèªã§ãã¦ã„ã‚‹ â†’ OK

ğŸ“† æ¯æ—¥ã€œ2 æ—¥ã« 1 å›ãã‚‰ã„ Dashboard ã®ã€ŒView Detailsã€ã‚’é–‹ã„ã¦ã€æ–°ã—ã„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãŒãªã„ã‹ã ã‘ç¢ºèª

ğŸ ã‚‚ã—è‡´å‘½çš„ãƒã‚°å ±å‘ŠãŒæ¥ãŸã‚‰ï¼š

ãƒ­ãƒ¼ã‚«ãƒ«ã§å†ç¾

ä¿®æ­£ â†’ v6 ãƒ“ãƒ«ãƒ‰ â†’ ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ†ã‚¹ãƒˆã«å·®ã—æ›¿ãˆ

å¿…è¦ãªã‚‰ Testers Community ã®ã‚µãƒãƒ¼ãƒˆã«ã€Œé‡å¤§ãƒã‚°ä¿®æ­£ç‰ˆã‚’ã‚¢ãƒƒãƒ—ã—ãŸã€æ—¨ã‚’ä¸€è¨€é€ã‚‹

## ãƒ•ã‚§ãƒ¼ã‚º Eï¼šæœ¬ç•ªãƒˆãƒ©ãƒƒã‚¯ã¸ã®æ˜‡æ ¼

12testers ã®ãƒ¬ãƒãƒ¼ãƒˆã‚’ç¢ºèª

ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã‚„é‡å¤§ãªãƒã‚°ãŒãªã„ã‹

ç‰¹ã« Start attendee check / èƒŒæ™¯ä½ç½®æƒ…å ±ã¾ã‚ã‚Š

å•é¡Œãªã‘ã‚Œã°ï¼š

åŒã˜ AAB v5 ã‚’ã€Œè£½å“ç‰ˆãƒˆãƒ©ãƒƒã‚¯ã€ã«æ˜‡æ ¼

å¿…è¦ã§ã‚ã‚Œã°ã‚¹ãƒˆã‚¢ã®èª¬æ˜æ–‡ãƒ»ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãƒ»ã‚¢ã‚¤ã‚³ãƒ³ã‚’æœ€çµ‚èª¿æ•´

ã€Œå…¬é–‹ã€ã‚’æŠ¼ã—ã¦ã€æ­£å¼ãƒªãƒªãƒ¼ã‚¹

### ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¾ã¨ã‚ï¼ˆç¾çŠ¶ã®ç¢ºå®šæƒ…å ±ï¼‰

1. RLS / Policies çŠ¶æ…‹ï¼ˆé‡è¦ï¼‰

public.events

RLSï¼šEnabledï¼ˆç”»é¢å³ä¸ŠãŒ â€œDisable RLSâ€ï¼‰

Policyï¼š1 ã¤

events_read_all

Commandï¼šSELECT

Applied toï¼špublic

USINGï¼štrueï¼ˆï¼å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«èª­ã¿å–ã‚Šè¨±å¯ï¼‰

public.groups

RLSï¼šDisabled

Policiesï¼šãªã—ï¼ˆNo policies created yetï¼‰

public.group_members

RLSï¼šDisabled

Policiesï¼šãªã—ï¼ˆNo policies created yetï¼‰

2. ãƒ†ãƒ¼ãƒ–ãƒ« DDLï¼ˆä¿å­˜æ¸ˆã¿ï¼‰

public.groups

create table public.groups (
id uuid not null default gen_random_uuid (),
name text not null,
description text null,
created_by uuid not null,
created_at timestamp with time zone not null default now(),
constraint groups_pkey primary key (id)
) TABLESPACE pg_default;

public.eventsï¼ˆã‚ãªãŸãŒè²¼ã£ã¦ãã‚ŒãŸå®šç¾©ï¼‰

group_id uuid not nullï¼ˆFK â†’ groups(id) on delete cascadeï¼‰

created_by uuid not null

ä»–ï¼štitle / start_utc / end_utc / lat/lng etc.

public.group_membersï¼ˆã‚ãªãŸãŒè²¼ã£ã¦ãã‚ŒãŸå®šç¾©ï¼‰

PKï¼š(group_id, user_id)ï¼ˆä¸¡æ–¹ uuidï¼‰

roleï¼šorganizer | member

FKï¼šgroup_id -> groups(id) on delete cascade

3. ç¾çŠ¶ã®å•é¡Œã«ç›´çµã™ã‚‹ç¢ºå®šç‚¹ï¼ˆåŸå› ãƒ¡ãƒ¢ï¼‰

events ã¯ â€œèª°ã§ã‚‚ SELECT ã§ãã‚‹â€ policy ãŒã‚ã‚‹ï¼ˆUSING trueï¼‰

groups / group_members ã¯ RLS disabled ã®ãŸã‚ã€ã‚¢ãƒ—ãƒªãŒ select() ã‚’æŠ•ã’ã‚‹ã¨åŸºæœ¬çš„ã«é€šã‚‹ï¼ˆåŒ¿åã‚­ãƒ¼ã‚’æŒã¤ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§èª­ã‚ã‚‹çŠ¶æ…‹ï¼‰

4. ä¿å­˜ç‰©ï¼ˆã‚ãªãŸã®æ‰‹å…ƒã«æ®‹ã£ã¦ã„ã‚‹ã¹ãã‚‚ã®ï¼‰

Policies ç”»é¢ã®ã‚¹ã‚¯ã‚·ãƒ§ï¼š

groupsï¼ˆRLS disabled / no policiesï¼‰

group_membersï¼ˆRLS disabled / no policiesï¼‰

eventsï¼ˆevents_read_all ã®ç·¨é›†ç”»é¢ï¼šUSING trueï¼‰

eventsï¼ˆpolicy ä¸€è¦§ï¼ševents_read_allï¼‰

DDL ãƒ†ã‚­ã‚¹ãƒˆï¼š

groups / events / group_members

ã“ã“ã¾ã§ãŒã€Œãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¾ã¨ã‚ã€ã§ã™ã€‚

## iphone ã§ã‚¢ãƒ—ãƒªèµ·å‹•

ã“ã‚Œã‹ã‚‰ã®åŸºæœ¬ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³

Metro èµ·å‹•ï¼ˆã¾ãšã¯ã“ã‚Œã ã‘ã§ OKï¼‰

cd "/Users/ken/app_development/rta-zero_restored"
npx expo start --dev-client --clear

iPhone ã§ GeoAttendanceTest ã‚’é–‹ã
â†’ è‡ªå‹•ã§ Metro ã«ç¹‹ãŒã£ã¦æ›´æ–°ã•ã‚Œã‚‹

ã„ã¤ Xcode ã® Run ãŒå¿…è¦ï¼Ÿ

ãµã ã‚“ã® JS/TS å¤‰æ›´ã ã‘ â†’ ä¸è¦ï¼ˆMetro + ã‚¢ãƒ—ãƒªèµ·å‹•ã§ OKï¼‰

æ¬¡ã®ã©ã‚Œã‹ã‚’ã‚„ã£ãŸæ™‚ â†’ Xcode ã§ Runï¼ˆãƒ“ãƒ«ãƒ‰ã—ç›´ã—ï¼‰

expo prebuild ã‚„ pod install ãŒçµ¡ã‚€å¤‰æ›´

app.json / app.config ã®ãƒã‚¤ãƒ†ã‚£ãƒ–è¨­å®šãŒå¤‰ã‚ã£ãŸ

ãƒã‚¤ãƒ†ã‚£ãƒ–ä¾å­˜ï¼ˆã‚«ãƒ¡ãƒ©/ä½ç½®/é€šçŸ¥/permissions ç³»ã‚„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªè¿½åŠ ï¼‰ã‚’å…¥ã‚Œæ›¿ãˆãŸ

ios/ ã‚’æ¶ˆã—ã¦ä½œã‚Šç›´ã—ãŸãƒ»Pods ãŒå¤‰ã‚ã£ãŸ

ã„ã¾å‡ºã¦ãŸã€ŒNo script URL providedã€å†ç™ºé˜²æ­¢

Metro ãŒèµ·å‹•ã—ã¦ãªã„ or é•ã†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§èµ·å‹•ã—ã¦ã‚‹ã¨å‡ºã‚‹ã“ã¨ãŒå¤šã„

è¿·ã£ãŸã‚‰ã“ã®é †ç•ªãŒå®‰å®šï¼š

npx expo start --dev-client --clear

iPhone ã§ GeoAttendanceTest èµ·å‹•

ã“ã®çŠ¶æ…‹ã§ã€æ¬¡ã«å›°ã‚ŠãŒã¡ãªã®ã¯ã€ŒåŒã˜ Wi-Fi ã˜ã‚ƒãªãã¦ç¹‹ãŒã‚‰ãªã„ã€ã€ŒPC ã® IP ãŒå¤‰ã‚ã£ã¦ç¹‹ãŒã‚‰ãªã„ã€ã‚ãŸã‚Šã€‚ã‚‚ã—ã¾ãŸæ¥ç¶šã§æ­¢ã¾ã£ãŸã‚‰ã€ãã®ç”»é¢ï¼ˆDev Client ã®æ¥ç¶šå…ˆè¡¨ç¤ºï¼‰ã‚¹ã‚¯ã‚·ãƒ§æŠ•ã’ã¦ã€‚

##ã€€ Play console ã¸ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ã¨ãã¯ä¸‹è¨˜ãŒæ­£è§£

npx eas build -p android --profile internal

å¿…è¦ãªã‚‰å±¥æ­´ã‚‚è¦‹ã‚Œã‚‹

npx eas build:list --platform android --limit 10
